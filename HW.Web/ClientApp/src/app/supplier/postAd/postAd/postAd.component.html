
<div class="container-fluid">
  <div class="row">
    <div id="page-wrapper">
      <div class="col-lg-12">
        <div class="row">
          <div class="col-lg-12 bg-white">
            <div class="row page-header">
              <div class="col-lg-12">
                <div class="row">
                  <div class="col-lg-9 col-md-8">
                    <div class="row">
                      <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                          <li class="breadcrumb-item active text-dark" aria-current="page">Post Ad</li>
                        </ol>
                      </nav>
                    </div>
                  </div>
                  <div class="col-lg-3 col-md-4 search-container">
                    &nbsp;
                  </div>
                </div>
              </div>
            </div>
            <div class="row postjob">
              <form class="col-lg-10 my-2 mx-auto postad-form" [formGroup]="postAdForm">
                <div class="form-row">
                  <div class="form-group col-md-4">
                    <label for="jobTitle">Category</label>
                    <select type="text" class="form-control" (change)="SelectCategroy($event.target.value)" formControlName="productCategoryId" [ngClass]="{ 'is-invalid': submitted &&  f.productCategoryId.errors }" [value]="0">
                      <option value="" selected hidden>Selcet category</option>
                      <option *ngFor="let item of productCategoryList" value="{{item.id}}">{{item.value}}</option>
                    </select>
                    <div *ngIf="submitted && f.productCategoryId.errors" class="invalid-feedback">
                      <div *ngIf="f.productCategoryId.errors.required">{{errorsList.categoryIdError}}</div>
                    </div>
                  </div>
                  <div *ngIf="productSubCategoryList.length > 0 || postAdVm.productSubcategoryId > 0" class="form-group col-md-4">
                    <label for="message">Sub Category</label>
                    <select type="text" id="jobTitle" class="form-control" (change)="SelectSubCategory($event.target.value)" formControlName="productSubCategoryId" [ngClass]="{ 'is-invalid': submitted &&  f.productSubCategoryId.errors }" [value]="0">
                      <option value="" selected hidden>Selcet Subcategory</option>
                      <option *ngFor="let item of productSubCategoryList" value="{{item.id}}">{{item.value}}</option>
                    </select>
                    <div *ngIf="submitted && f.productSubCategoryId.errors" class="invalid-feedback">
                      <div *ngIf="f.productSubCategoryId.errors.required">{{errorsList.subCategoryIdError}}</div>
                    </div>
                  </div>
                  <div class="form-group col-md-4">
                    <label for="postTitle">Give a Title to Your Post</label>
                    <input type="text" id="postTitle" class="form-control" formControlName="postTitle" [ngClass]="{ 'is-invalid': submitted &&  f.postTitle.errors }" required>
                    <div *ngIf="submitted && f.postTitle.errors" class="invalid-feedback">
                      <div *ngIf="f.postTitle.errors.required">{{errorsList.adTitleError}}</div>
                    </div>
                  </div>
                  <div class="form-group col-md-12">
                    <label for="product">About Product</label>
                    <textarea type="text" id="product" class="form-control desc" formControlName="postDiscription" [ngClass]="{ 'is-invalid': submitted &&  f.postDiscription.errors }" required></textarea>
                    <div *ngIf="submitted && f.postDiscription.errors" class="invalid-feedback">
                      <div *ngIf="f.postDiscription.errors.required">{{errorsList.descriptionError}}</div>
                    </div>
                  </div>
                  <div class="form-group col-md-12">
                    <label>Add Images <small>(max 5)</small></label>
                    <div class="form-control upload-img">
                      <div class="file btn btn-lg btn-light">
                        <i class="far fa-image"></i>
                        <input type="file" name="file" id="name" accept="image/*" multiple (change)="OnSelectFile($event)">
                      </div>
                      <div *ngFor="let i of listOfImages" class="addImgFile">
                        <img class=".modallist" width="100" height="100" (click)="ImagePopUp(i.imageBase64)" [src]="i.imageBase64" alt="" data-toggle="modal" data-target="#postad-img-modal">
                      </div>
                      <!-- Modal -->
                      <div bsModal #ImageModal="bs-modal" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                          <!-- Modal content-->
                          <div class="modal-content" *ngIf="imageContent!=null">
                            <div (click)="Close()" class="btn-close" data-dismiss="modal"><i class="fas fa-times-circle"></i></div>
                            <img [src]="imageContent" style="height:450px;width:auto;object-fit:contain" alt="" />
                          </div>
                        </div>
                      </div>
                    </div>

                  </div>
                  <div class="form-group col-md-6 d-none">
                    <label>Add Video <small>(only 1)</small></label>
                    <div class="form-control upload-img">
                      <div class="file btn btn-lg btn-light">
                        <i class="fas fa-video"></i>
                        <input type="file" name="file" id="name">
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-4">
                    <label for="price">Price <small>(Rs.)</small></label>
                    <input type="number" id="price" class="form-control" formControlName="price" [ngClass]="{ 'is-invalid': submitted &&  f.price.errors }" required>
                    <div *ngIf="submitted && f.price.errors" class="invalid-feedback">
                      <div *ngIf="f.price.errors.required">{{errorsList.priceError}}</div>
                    </div>
                  </div>
                  <div class="form-group col-md-4">
                    <label for="city">City</label>
                    <select id="city" class="form-control" (change)="SelectCity($event.target.value)" formControlName="cityId" [ngClass]="{ 'is-invalid': submitted &&  f.cityId.errors }" [value]="0">
                      <option value="" selected hidden>Select City</option>
                      <option *ngFor="let item of cityList" value="{{item.id}}">{{item.value}}</option>
                    </select>
                    <div *ngIf="submitted && f.cityId.errors" class="invalid-feedback">
                      <div *ngIf="f.cityId.errors.required">{{errorsList.cityError}}</div>
                    </div>
                  </div>
                  <div class="form-group col-md-4">
                    <label for="town">Town</label>
                    <input type="text" id="town" formControlName="town" class="form-control" [ngClass]="{ 'is-invalid': submitted &&  f.town.errors }" required>
                    <div *ngIf="submitted && f.town.errors" class="invalid-feedback">
                      <div *ngIf="f.town.errors.required">{{errorsList.townError}}</div>
                    </div>
                  </div>
                  <div class="form-group col-md-12">
                    <label for="address">Address</label>
                    <textarea type="text" id="address" formControlName="address" [ngClass]="{ 'is-invalid': submitted &&  f.address.errors }" class="form-control desc" required></textarea>
                    <div *ngIf="submitted && f.address.errors" class="invalid-feedback">
                      <div *ngIf="f.address.errors.required">{{errorsList.addressError}}</div>
                    </div>
                  </div>
                  <div class="form-group col-md-12 shipmentMethods">
                    <h4>Shipment Methods</h4>
                    <div class="row">
                      <div class="form-group col-lg-4 col-md-6">
                        <div class="form-check">
                          <div class="material-switch">
                            <input id="delivery" name="delivery" type="checkbox" checked formControlName="deliveryAvailable" />
                            <label for="delivery" class="label-success"></label>
                          </div>
                          <label class="form-check-label text-dark" for="gridCheck">
                            Delivery Available
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="form-group col-lg-4 col-md-6">
                        <div class="form-check">
                          <div class="material-switch">
                            <input id="collection" name="collection" type="checkbox" required formControlName="collectionAvailable" checked [ngClass]="{ 'is-invalid': submitted &&  f.collectionAvailable.errors }" />
                            <label for="collection" class="label-success"></label>
                          </div>
                          <label class="form-check-label text-dark" for="gridCheck">
                            Collection Available
                          </label>
                          <div *ngIf="submitted && f.collectionAvailable.errors" class="invalid-feedback">
                            <div *ngIf="f.collectionAvailable.errors.required">{{errorsList.collectionError}}</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div *ngIf="AdId == 0" class="col-lg-12 text-right mb-4">
                    <button type="button" (click)="postAd()" class="btn btn-primary next"> Next</button>
                  </div>
                  <div *ngIf="AdId > 0" class="form-group col-md-12 mt-2 text-center">
                    <button  type="button" (click)="openConfirmationModal()" class="btn btn-danger .modallist" data-toggle="modal" data-target="#requestCallback">Remove</button>
                    <button type="button" (click)="postAd()" class="btn btn-primary"> Update</button>
                    <!-- Request Callback Modal -->
                    <div  bsModal #confirmationModal="bs-modal" class="modal fade" role="dialog">
                      <div class="modal-dialog">
                        <div class="modal-content">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                          <div class="modal-body text-center">
                            <p>Are youe sure you want to remove?</p>
                            <div class="mt-3">
                              <a (click)="deleteAd()"  class="btn btn-outline-success pl-3 pr-3">Yes</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

