<div class="heading-bar d-flex align-items-center" style="background:url('../../../assets/img/pro_bg.png')">
  <div class="container">
    <h1 class="py-3 laila-font text-white">Promotions</h1>
  </div>
</div>
<div class="container pt-4">

  <section id="nd-right-content">
    <div *ngIf="notFound" id="no-found" class="text-center d-flex justify-content-center align-items-center">
      <div>
        <h1 class="mb-3  text-uppercase"><i class="fas fa-exclamation-circle text-danger"></i> Oops!</h1>
        <h5 class="text-danger text-capitalize">you don't have any promotions yet. </h5>
      </div>
    </div>
  </section>

  <!-------------------- Show Customer PrmotionsList -------------------------->

  <div *ngIf="customerPromotionsList?.length > 0 ">
    <div class="pb-3 d-flex justify-content-between align-items-center flex-wrap">
      <h4 class="text-uppercase" style="color:var(--mheadingClr)">Customer Promotions</h4>
      <a [routerLink]="[this.common.apiUrls.UserManagement.GetPromotionsListByUserRole]" [queryParams]="{rId : userRoles.CRole,cTId:campaignTypeId }" class="btn mp-outine-btn mt-2 mb-2 d-block text-left ">see more</a>
    </div>
    <div class="row promo-cards">
      <div class="mb-4 col-12 col-sm-6 col-lg-4 col-xl-3" *ngFor="let item of customerPromotionsList">
        <div class="card">
          <div class="promo-img-wrapper">
            <img class="card-img-top" [src]="common.transform(item?.image)" alt="Card image cap">
          </div>
          <div class="card-body">
            <h6 class="card-title">{{(item?.name.length) <= 20 ? (item?.name) : (item.name | slice:0:20)+'...' }}</h6>
            <a [routerLink]="[this.common.apiUrls.UserManagement.GetPromotionDetailsByUserRole]" [queryParams]="{pId : item?.promotionId,rId:userRoles.CRole,cTId:campaignTypeId}" class="btn mp-outine-btn mt-2 text-left">details</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-------------------- Show Tradesman PrmotionsList -------------------------->

  <div *ngIf="tradesmanPromotionsList?.length > 0 ">
    <div class="pb-3 d-flex justify-content-between align-items-center flex-wrap">
      <h4 class="text-uppercase" style="color:var(--mheadingClr)">Tradesman Promotions</h4>
      <a [routerLink]="[this.common.apiUrls.UserManagement.GetPromotionsListByUserRole]" [queryParams]="{rId : userRoles.TRole ,cTId:campaignTypeId}" class="btn mp-outine-btn mt-2 mb-2 d-block text-left ">see more</a>
    </div>
    <div class="row promo-cards">
      <div class="mb-4 col-12 col-sm-6 col-lg-4 col-xl-3" *ngFor="let item of tradesmanPromotionsList">
        <div class="card">
          <div class="promo-img-wrapper">
            <img class="card-img-top" [src]="common.transform(item?.image)" alt="Card image cap">
          </div>
          <div class="card-body">
            <h6 class="card-title">{{(item?.name.length) <= 20 ? (item?.name) : (item.name | slice:0:20)+'...' }}</h6>
            <a [routerLink]="[this.common.apiUrls.UserManagement.GetPromotionDetailsByUserRole]" [queryParams]="{pId : item?.promotionId,rId:userRoles.TRole,cTId:campaignTypeId}" class="btn mp-outine-btn mt-2 text-left">details</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-------------------- Show Tradesman Organization PrmotionsList -------------------------->

  <div *ngIf="organizationPromotionsList?.length > 0 ">
    <div class="pb-3 d-flex justify-content-between align-items-center flex-wrap">
      <h4 class="text-uppercase" style="color:var(--mheadingClr)">Organizations Promotions</h4>
      <a [routerLink]="[this.common.apiUrls.UserManagement.GetPromotionsListByUserRole]" [queryParams]="{rId : userRoles.ORole,cTId:campaignTypeId }" class="btn mp-outine-btn mt-2 mb-2 d-block text-left ">see more</a>
    </div>
    <div class="row promo-cards">
      <div class="mb-4 col-12 col-sm-6 col-lg-4 col-xl-3" *ngFor="let item of organizationPromotionsList">
        <div class="card">
          <div class="promo-img-wrapper">
            <img class="card-img-top" [src]="common.transform(item?.image)" alt="Card image cap">
          </div>
          <div class="card-body">
            <h6 class="card-title">{{(item?.name.length) <= 20 ? (item?.name) : (item.name | slice:0:20)+'...' }}</h6>
            <a [routerLink]="[this.common.apiUrls.UserManagement.GetPromotionDetailsByUserRole]" [queryParams]="{pId : item?.promotionId,rId:userRoles.ORole,cTId:campaignTypeId}" class="btn mp-outine-btn mt-2 text-left">details</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-------------------- Show Supplier PrmotionsList -------------------------->

  <div *ngIf="supplierPromotionsList?.length > 0 ">
    <div class="pb-3 d-flex justify-content-between align-items-center flex-wrap">
      <h3 class="text-uppercase" style="color:var(--mheadingClr)">Supplier Promotions</h3>
      <a [routerLink]="[this.common.apiUrls.UserManagement.GetPromotionsListByUserRole]" [queryParams]="{rId : userRoles.SRole, cTId:campaignTypeId}" class="btn mp-outine-btn mt-2 mb-2 d-block text-left ">see more</a>
    </div>
    <div class="row promo-cards">
      <div class="mb-4 col-12 col-sm-6 col-lg-4 col-xl-3" *ngFor="let item of supplierPromotionsList">
        <div class="card">
          <div class="promo-img-wrapper">
            <img class="card-img-top" [src]="common.transform(item?.image)" alt="Card image cap">
          </div>
          <div class="card-body">
            <h6 class="card-title">{{(item?.name.length) <= 20 ? (item?.name) : (item.name | slice:0:20)+'...' }}</h6>
            <a [routerLink]="[this.common.apiUrls.UserManagement.GetPromotionDetailsByUserRole]" [queryParams]="{pId : item?.promotionId,rId:userRoles.SRole,cTId:campaignTypeId}" class="btn mp-outine-btn mt-2 d-block text-left">details</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-------------------- View Promotion Details -------------------------->

<ng-template #promoContent let-modal>
  <div class="modal-header">
    <h4 class="modal-title primary-color" id="modal-basic-title">PROMOTION DETAILS</h4>
  </div>
  <div class="modal-body">
    <div class="d-flex flex-wrap justify-content-between align-items-center mb-3">
      <h5 style="color: var(--headingClr)">{{promoDetails?.name}}</h5>
      <div>
        <p class="m-0">Skill Name: <button type="button" (click)="navigateWithSkillId(promoDetails?.skillId)" class="btn btn-success ml-2">{{promoDetails?.skillName}}</button></p>
      </div>
    </div>
    <div class="promo-image-wrapper">
      <img (click)="navigateWithSkillId(promoDetails?.skillId)" style="cursor:pointer" [src]="common.transform(promoDetails?.image)" />
    </div>
    <div class="mt-3" [innerHTML]="promoDetails?.description"></div>
  </div>
  <div class="modal-footer">
    <div class="row">
      <div class="col-md-6 inline-downlod-btns">
        <button type="button" ngbAutofocus class="btn mp-outine-btn btn-sm" (click)="modal.close('Save click')">Close</button>
      </div>
    </div>
  </div>
</ng-template>
