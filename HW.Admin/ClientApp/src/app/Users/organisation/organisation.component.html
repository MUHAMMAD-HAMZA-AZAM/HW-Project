<div class="container-fluid">

  <div class="aj-heading-wrapper">
    <div style="min-width:10%">
      <h5>Organization</h5>
    </div>
    <div class="active-job-details" style="min-width:90%;justify-content:flex-start !important">
      <div class="active-job-box" style="margin-right:.33%">
        <h6 class="text-success">Sole Traders: {{tradesmanStats.tradesmanCount}}</h6>
      </div>
      <div class="active-job-box">
        <h6 class="text-danger">Organizations: {{tradesmanStats.organisationCount}}</h6>
      </div>
    </div>
  </div>

  <div class="contentWrapper">
    <div class="row">
      <div class="col-md-4">
        <h6 class="mainTitle" data-toggle="collapse" href="#collapse2" aria-expanded="true">Search Organization</h6>
      </div>
    </div>
    <div id="collapse2" class="contentWrapper fs-12 collapse">
      <form class="" #checkParent>
        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label for="customerName">Orgnization Name</label>
              <div class="input-group">
                <input type="text" autocomplete="off" id="tradesmanName" name="tradesmanName" maxlength="30" class="form-control" [(ngModel)]="tradesmanName" placeholder="Orgnization Name" (keypress)="service.omit_special_char($event)" />
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <input type="radio" value="1" id="start" (click)="getRadioValue($event)" name="tradesmanSearch" checked>
                    <label class="" for="start">Start</label>
                    <input type="radio" class="" (click)="getRadioValue($event)" value="2" id="anyWhere" name="tradesmanSearch">
                    <label class="" for="anyWhere">Anywhere</label>
                    <input type="radio" class="" value="3" id="end" (click)="getRadioValue($event)" name="tradesmanSearch">
                    <label class="" for="end">End</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-4">
            <div class="form-group">
              <label class="">Orgnization Id</label>
              <input type="text" id="organizationId" [(ngModel)]="organizationId" name="organizationId" class="form-control" />
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-2">
            <div class="form-group">
              <label class="">Start Date</label>
              <input type="date" id="startDate" [(ngModel)]="startDate" name="startDate" class="form-control" />
              <div *ngIf="submittedApplicationForm" class="invalid-feedback">
                <div><p>{{startDateErrorMessage}}</p></div>
              </div>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <label class="">End Date</label>
              <input type="date" id="endDate" [(ngModel)]="endDate" name="endDate" class="form-control" />
              <div *ngIf="submittedApplicationForm" class="invalid-feedback">
                <div><p>{{endDateErrorMessage}}</p></div>
              </div>
            </div>
          </div>

        </div>
        <div class="row mt-1">
          <div class="col-md-2 ">
            <div class="form-group">
              <label for="cnic">CNIC</label>
              <input type="text" class="form-control" [(ngModel)]="cnic" maxlength="13" id="cnic" name="cnic" placeholder="CNIC" (keypress)="service.numberOnly($event)" />
            </div>
          </div>
          <div class="col-md-2 ">
            <div class="form-group  ">
              <label for="cnic">Mobile Number</label>
              <input type="text" class="form-control" [(ngModel)]="mobile" maxlength="11" id="Mobile" name="Mobile" placeholder="Mobile Number" (keypress)="service.numberOnly($event)" />
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-2">
            <label class="">Tradesman Type</label>
            <ng-multiselect-dropdown placeholder="Tradesman Type" style="display:inline; vertical-align:top"
                                     [settings]="skillsdropdownSettings"
                                     [data]="skillList"
                                     [(ngModel)]="selectedSkills"
                                     name="selectedSkills"
                                     (onSelect)="onItemSelect($event)"
                                     (onSelectAll)="onItemSelectAll($event)"
                                     (onDeSelect)="OnItemDeSelect($event)"
                                     (onDeSelectAll)="OnItemDeSelectALL($event)"
                                     (OnDeSelect)="OnItemDeSelect($event)">
            </ng-multiselect-dropdown>
          </div>
          <div class="col-md-2">
            <label class="">City</label>
            <ng-multiselect-dropdown placeholder="City" style="display:inline;"
                                     [settings]="dropdownListForCity"
                                     [data]="cityList"
                                     [(ngModel)]="selectedCities"
                                     name="selectedCities"
                                     (onSelect)="onCitySelect($event)"
                                     (onSelectAll)="onCitySelectAll($event)"
                                     (onDeSelect)="onCityDeSelect($event)"
                                     (onDeSelectAll)="onCityDeSelectALL($event)"
                                     (OnDeSelect)="onCityDeSelect($event)">
            </ng-multiselect-dropdown>
          </div>

        </div>
        <div class="row mt-1">
          <div class="col-md-2">
            <label class="">Salesman</label>
            <ng-multiselect-dropdown placeholder="Salesman" style="display:inline;"
                                     [settings]="salesmandropdownSettings"
                                     [data]="salesmanList1"
                                     [(ngModel)]="selectedsalesman"
                                     name="selectedsalesman">
              <!--(onSelect)="onCitySelect($event)"
              (onSelectAll)="onCitySelectAll($event)"
              (onDeSelect)="onCityDeSelect($event)"
              (onDeSelectAll)="onCityDeSelectALL($event)"
              (OnDeSelect)="onCityDeSelect($event)"-->
            </ng-multiselect-dropdown>
          </div>
          <div class="col-md-2 ">
            <div class="form-group  ">
              <label for="cnic">Tradesman Id</label>
              <input type="text" class="form-control" [(ngModel)]="id" maxlength="30" id="id" name="id" placeholder="Tradesman Id" />
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-2 ">
            <div class="form-group  ">
              <label for="cnic">Email</label>
              <input type="text" class="form-control" [(ngModel)]="email" maxlength="30" id="email" name="email" placeholder="Email" />
            </div>
          </div>
          <div class="col-md-2 addressSearch">
            <div class="form-group  ">
              <label for="businessAddress">Location</label>
              <!--<input type="text" class="form-control desc" [(ngModel)]="location" autocomplete="off" id="location" name="location" (keyup)="serachAddress(location)" autocapitalize="off" spellcheck="off" #search />-->
              <input type="text" class="form-control desc" [(ngModel)]="location" maxlength="50" placeholder="Location" autocomplete="off" id="location" name="location" autocapitalize="off" spellcheck="off" #search />
            </div>
            <div class="addressSearchResult" *ngIf="isAddress">
              <ul>
                <li *ngFor="let address of searchedAddress">
                  <a (click)="setAddressValue($event)">{{address.customerAddress}}</a>
                </li>
                <!--<li *ngIf="!locationSearchKeyMatch" class="text-danger text-center">No location Found</li>-->
              </ul>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-4">
            <div class="form-group">
              <label>User Type</label>
              <div class="input-group-prepend">
                <div class="input-group-text user-type">
                  <input type="radio" value="3" id="all" (click)="getRadioValueut($event)" name="groupOfDefaultRadios1" checked>
                  <label class="" for="all">All User</label>
                  <input type="radio" value="1" id="real" (click)="getRadioValueut($event)" name="groupOfDefaultRadios1">
                  <label class="" for="real">Real User</label>
                  <input type="radio" class="" (click)="getRadioValueut($event)" value="2" id="test" name="groupOfDefaultRadios1">
                  <label class="" for="test">Test User</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-4">
            <div class="form-group">
              <label>Email Verification Type</label>
              <div class="input-group-prepend">
                <div class="input-group-text user-type">
                  <input type="radio" value="1" id="all1" (click)="getRadioValueemail($event)" name="groupOfDefaultRadios2" checked #restChecked>
                  <label class="" for="all1">All User</label>
                  <input type="radio" value="2" id="real1" (click)="getRadioValueemail($event)" name="groupOfDefaultRadios2">
                  <label class="" for="real1">Email Verified</label>
                  <input type="radio" class="" (click)="getRadioValueemail($event)" value="3" id="test1" name="groupOfDefaultRadios2">
                  <label class="" for="test1">Email Unverified</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-4">
            <div class="form-group">
              <label>Mobile No Verification Type</label>
              <div class="input-group-prepend">
                <div class="input-group-text user-type">
                  <input type="radio" value="1" id="allMobileUsers" (click)="getRadioValueMobileNo($event)" name="groupOfDefaultRadios3" checked>
                  <label class="" for="allMobileUsers">All User</label>
                  <input type="radio" value="2" id="verifiedMobileUser" (click)="getRadioValueMobileNo($event)" name="groupOfDefaultRadios3">
                  <label class="" for="verifiedMobileUser">Mobile No Verified</label>
                  <input type="radio" class="" (click)="getRadioValueMobileNo($event)" value="3" id="unVerifiedMobileUser1" name="groupOfDefaultRadios3">
                  <label class="" for="unVerifiedMobileUser1">Mobile No Unverified</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-4">
            <div class="form-group">
              <label>Tradesman Activity</label>
              <div class="input-group-prepend">
                <div class="input-group-text user-type">
                  <input type="radio" value="1" id="allMobileUsers11" (click)="getRadioValueActivity($event)" name="groupOfDefaultRadios4" checked>
                  <label class="" for="allMobileUsers11">All</label>
                  <input type="radio" value="2" id="allMobileUsers1" (click)="getRadioValueActivity($event)" name="groupOfDefaultRadios4">
                  <label class="" for="allMobileUsers1">Jobs Done</label>
                  <input type="radio" value="3" id="verifiedMobileUser1" (click)="getRadioValueActivity($event)" name="groupOfDefaultRadios4">
                  <label class="" for="verifiedMobileUser1">Bids Place No Job Done</label>
                  <input type="radio" class="" (click)="getRadioValueActivity($event)" value="4" id="unVerifiedMobileUser2" name="groupOfDefaultRadios4">
                  <label class="" for="unVerifiedMobileUser2">No Activity</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-4">
            <div class="form-group">
              <label>Source Of Reg</label>
              <div class="input-group-prepend">
                <div class="input-group-text user-type">
                  <input type="radio" value="0" id="allMobileUsers11" (click)="getRadioValuesource($event)" name="groupOfDefaultRadios41" checked>
                  <label class="" for="allMobileUsers11">All User</label>
                  <input type="radio" value="1" id="verifiedMobileUser1" (click)="getRadioValuesource($event)" name="groupOfDefaultRadios41">
                  <label class="" for="verifiedMobileUser1">Custom</label>
                  <input type="radio" class="" (click)="getRadioValuesource($event)" value="2" id="unVerifiedMobileUser21" name="groupOfDefaultRadios41">
                  <label class="" for="unVerifiedMobileUser21">Facebook</label>
                  <input type="radio" class="" (click)="getRadioValuesource($event)" value="3" id="unVerifiedMobileUser211" name="groupOfDefaultRadios41">
                  <label class="" for="unVerifiedMobileUser211">Google</label>
                  <input type="radio" class="" (click)="getRadioValuesource($event)" value="4" id="unVerifiedMobileUser21" name="groupOfDefaultRadios41">
                  <label class="" for="unVerifiedMobileUser21">Apple</label>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-4 inline-downlod-btns">
            <div class="form-group">
              <input class="btn btn-primary btn-sm" type="submit" value="Search" (click)="populateOrganiztionList()" />
            </div>
            <div class="form-group">
              <input class="btn btn-primary btn-sm" type="button" (click)="resetForm()" value="Reset" />
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="inline-downlod-btns justify-content-end" *ngIf="tradesmanList.length > 0">
    <div class="form-group ml-2" *ngIf=" selecteddatasingle.length> 0 && userRole.allowDelete">
      <input class="btn btn-primary btn-sm" type="button" value="Delete Tradesman" (click)="DeleteSelectedUser(contentdeleteuser)" />
    </div>
    <div class="form-group ml-2" *ngIf=" selecteddatasingle.length> 0 && userRole.allowAdd">
      <input class="btn btn-primary btn-sm" type="button" value="Link With Salesman" (click)="SalesmanConfirm(contentsales)" />
    </div>
    <ng-container *ngIf="userRole.allowExport">
      <div class="form-group ml-2">
        <input class="btn btn-primary btn-sm" type="button" value="Download pdf" (click)="DownloadPdf()" />
      </div>
      <div class="form-group ml-2">
        <input class="btn btn-primary btn-sm" type="button" value="Download Excel" (click)="DownloadXlsx()" />
      </div>
      <div class="form-group ml-2">
        <input class="btn btn-primary btn-sm" type="button" value="Download Csv" (click)="exportCSV()" />
      </div>
    </ng-container>
  </div>

  <div class="card shadow mb-4" [hidden]="!dataNotFound">
    <div class="card-header justify-header">
      <h6 class="m-0 font-weight-bold">Organization List</h6>
      <div class="fa-pull-right d-flex align-items-center">
        <button *ngIf="userRole.allowAdd" (click)="showModalAdd1('' , '',addNewSupplier)" class="btn-sm btn btn-secondary btn-sm"><i class="fa fa-plus"></i> Add New Organization</button>
        <div class="g-pagination">
          <div class="data-count">
            <span>{{recoardNoFrom}}-{{recoardNoTo}} of {{totalRecoards}}</span>
            <div class="newOrOld-Data">
              <ul>
                <li><a (click)="LoadNewestRecoards()"> Newest</a></li>
                <li><a (click)="LoadOldestRecoards()">Oldest</a></li>
              </ul>
            </div>
          </div>
          <div class="indicators">
            <i class="fa fa-angle-left" (click)="PriviousClick()"></i>
            <i class="fa fa-angle-right" (click)="NextClick()"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="card-body">
      <div class="show_entries">
        <div class="no-of-entries">
          <label>No of Enteries</label>
          <select (change)="changePageSize()" [(ngModel)]="tradesmanStats.pageSize">
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
        </div>
        <div class="n0-of-pages">
          <label>No of Pages</label>
          <select class="" [(ngModel)]="pageNumber" (change)="clickchange()">
            <option *ngFor="let item of pageing1" value="{{item}}">{{item}} </option>
          </select>

        </div>
      </div>
      <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover" id="dataTable" width="100%" cellspacing="0" #dataTable>
          <thead>
            <tr>
              <th width="1%" *ngIf="pdfrequest">Select</th>
              <th title="Tradesman Id" width="1%">TMID</th>
              <th width="8%">Tradesman Name</th>
              <th width="5%">Email</th>
              <th width="3%">Mobile</th>
              <th width="3%">CNIC</th>
              <th width="4%">RegisteredBy</th>
              <th width="6%" title="Created Date">CD</th>
              <th width="6%" title="Last Active">LA</th>
              <th width="1%" title="Email Verified">EV</th>
              <th width="1%" title="Mobile No Verified">MV</th>
              <th width="3%" title="Source Of Reg">SOR</th>
              <th width="15%">Skills</th>
              <th width="10%">Address</th>
              <th title="Completed Jobs" width="1%">CJ<!--Completed Jobs--></th>
              <th title="Bids Placed" width="1%">BP<!--Completed Jobs--></th>
              <!--<th width="1%" title="User Type">UT</th>-->
              <th title="Details" width="1%" *ngIf="pdfrequest">Det</th>
              <th width="1%" title="Change User Type" *ngIf="userRole.allowEdit">CUT</th>
              <th title="Block Orgnization User" width="1%" *ngIf="userRole.allowEdit">BOU</th>
              <th width="2%" *ngIf="userRole.allowEdit">Edit</th>
              <!--<th title="Statistical Analysis" width="1%">SA</th>-->
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let tradesman of cloneList">
              <td *ngIf="tradesman.isselectedforexport==true && pdfrequest"> <input type="checkbox" #checkboxes ng-checked="true" checked class="custom-checkbox checked" (change)="onCheckboxChange($event,tradesman)" value={{tradesman.tradesmanId}} /></td>
              <td *ngIf="tradesman.isselectedforexport==false && pdfrequest">
                <input type="checkbox" #checkboxes ng-checked="true" class="custom-checkbox checked" (change)="onCheckboxChange($event,tradesman)" value={{tradesman.tradesmanId}} />
              </td>
              <td>{{tradesman.tradesmanId}}</td>
              <td>{{tradesman.tradesmanName}}</td>
              <td>{{tradesman.email}}</td>
              <td>{{tradesman.mobileNo}}</td>
              <td>{{tradesman.cnic}}</td>
              <td>{{tradesman.salesmanName}}</td>
              <td>{{tradesman.createdOn | date: "dd MMM yyy"}}</td>
              <td>{{tradesman.lastActive | date: "dd MMM yyy"}}</td>
              <td *ngIf="tradesman.emailConfirmed== true ">Yes</td>
              <td *ngIf="tradesman.emailConfirmed!= true ">No</td>
              <td *ngIf="tradesman.phoneNumberConfirmed">Yes</td>
              <td *ngIf="!tradesman.phoneNumberConfirmed">No</td>
              <td>{{tradesman.sourceOfReg}}</td>
              <td> {{tradesman.smallSkills }} <i *ngIf="tradesman.skills !=null && tradesman.skills !=''" class="fas fa-eye" placement="top" ngbPopover={{tradesman.skills}} popoverTitle="Skills"></i></td>
              <!--<td>{{tradesman.tradesmanAddress}}</td>-->
              <td>{{(tradesman.tradesmanAddress.length > 30) ? (tradesman.tradesmanAddress | slice:0:30)+'...':(tradesman.tradesmanAddress)}}</td>
              <td>{{tradesman.completedJobsCount}}</td>
              <td>{{tradesman.bidsCount}}</td>
              <!--<td *ngIf="tradesman.isTestUser== true ">Test</td>
              <td *ngIf="tradesman.isTestUser!= true ">Real</td>-->
              <td *ngIf="pdfrequest">
                <i class="fas fa-eye" data-keyboard="false" (click)="GetBussinessProfile(tradesman.tradesmanId,profileModal)"></i>
              </td>
              <td *ngIf="userRole.allowEdit"><button (click)="showModel1(tradesman.userId,content1)" class="border-primary fa fa-user-edit primary-color" [class.text-danger]="tradesman.isTestUser" aria-hidden="true"></button></td>

              <!--<td *ngIf="sprights == 'true'"><button (click)="showModel(tradesman.tradesmanId,content)" class="" [disabled]="!tradesman.isActive" [class.border-primary]="tradesman.isActive"><i [ngClass]="(!tradesman.isActive)? 'text-dark' : 'primary-color' " class="fa fa-ban" aria-hidden="true"></i></button></td>-->
              <td *ngIf="userRole.allowEdit">
                <label class="switch block-user-switch">
                  <input type="checkbox" (change)="handleChange($event,tradesman.userId)" [checked]="tradesman.isActive" id="{{tradesman.tradesmanId}}">
                  <span class="slider"></span>
                </label>
              </td>
              <td *ngIf="userRole.allowEdit"><button (click)="showModalAdd(tradesman.tradesmanId,tradesman.email,tradesman.mobileNo , tradesman.userId,addNewSupplier)" class="border-primary fa fa-edit primary-color" aria-hidden="true"></button></td>
              <!--<td><i class="fas fa-eye" (click)="showAnalyticsModal(tradesman.tradesmanId,analyticsModal)"></i></td>-->
            </tr>
          </tbody>
        </table>
      </div>
      <div class="card-body" style="padding:0px !important">
        <div class="show_entries">
          <div class="no-of-entries">
            <label>No of Enteries</label>
            <select (change)="changePageSize()" [(ngModel)]="tradesmanStats.pageSize">
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>
          <div class="n0-of-pages">
            <label>No of Pages</label>
            <select class="" [(ngModel)]="pageNumber" (change)="clickchange()">
              <option *ngFor="let item of pageing1" value="{{item}}">{{item}} </option>
            </select>

          </div>
        </div>
      </div>
      <div class="card-header justify-header">
        <h6 class="m-0 font-weight-bold">Organization List</h6>
        <div class="g-pagination">
          <div class="data-count">
            <span>{{recoardNoFrom}}-{{recoardNoTo}} of {{totalRecoards}}</span>
            <div class="newOrOld-Data">
              <ul>
                <li><a (click)="LoadNewestRecoards()"> Newest</a></li>
                <li><a (click)="LoadOldestRecoards()">Oldest</a></li>
              </ul>
            </div>
          </div>
          <div class="indicators">
            <i class="fa fa-angle-left" (click)="PriviousClick()"></i>
            <i class="fa fa-angle-right" (click)="NextClick()"></i>
          </div>
        </div>
      </div>

    </div>

  </div>

  <!--<ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Confirm Block</h4>
    </div>
    <div class="modal-body">
      <h6>Are you want to block?</h6>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-sm btn-primary" value="true" (click)="confrimBlock();modal.close()">Ok</button>
      <button type="button" class="btn btn-primary btn-sm" (click)="modal.close('Save click')">Cancel</button>
    </div>
  </ng-template>-->
  <!--<div bsModal #supplierdetailsModal="bs-modal" id="supplierdetailsModal" class="modal fade">
    <div class="modal-dialog modal-confirm  modal-lg modalWidth" style=" max-width: 65%">
      <div class="modal-content">
        <div class="modal-header flex-column">
          <h5 class="text-primary">Orgnization Details</h5>
          <button type="button" class="close" data-dismiss="modal"></button>
        </div>
        <div class="modal-body" style="width:100%;">
          <div class="row modal-primary-user-info">
            <div class="col-md-4">
              <figure class="figure">
                <ng-container *ngIf="businessProfile.profileImage !=null; else noThumbnail">
                  <img height="280" width="280" class="figure-img  rounded" [src]="service.transform(businessProfile.profileImage)" alt="...">
                </ng-container>
                <ng-template #noThumbnail>
                  <img height="280" width="280" class="figure-img  rounded" src="../../../assets/img/user-placeholder.png" alt="">
                </ng-template>
              </figure>
            </div>
            <div class="col-md-8">
              <h6 class="btn-primary py-1 pl-2">Personal Information</h6>
              <div class="row puser-info">
                <div class="col-md-4 font-weight-bold">
                  <label>First Name</label>
                  <label>Last name</label>
                  <label>CNIC</label>
                  <label>Date-of-Birth</label>
                  <label>Gender</label>
                  <label>Mobile</label>
                  <label>Email</label>
                  <label>Registered On</label>
                </div>
                <div class="col-md-8">
                  <label>{{businessProfile.firstName !=null ? businessProfile.firstName : '-'}}</label>
                  <label>{{businessProfile.lastName !=null ? businessProfile.lastName : '-'}}</label>
                  <label>{{businessProfile.cnic !=null && businessProfile.cnic !='' ? businessProfile.cnic : '-' }}</label>
                  <label>{{businessProfile?.dob  ? (businessProfile.dob | date:'dd MMM yyyy')  : '-'}}</label>
                  <label *ngIf="businessProfile.gender == 1">Male</label>
                  <label *ngIf="businessProfile.gender == 2">Female</label>
                  <label *ngIf="businessProfile.gender != 0 && businessProfile.gender != 1">Other</label>
                  <label>{{businessProfile.mobile !=null ? businessProfile.mobile : '-'}}</label>
                  <label>{{businessProfile.email !=null && businessProfile.email !='' ? businessProfile.email : '-' }}</label>
                  <label>{{businessProfile.createdOn | date:'dd MMM yyyy'}}</label>
                </div>
              </div>
              <h6 class="btn-primary py-1 pl-2 mt-3">Business Information</h6>
              <div class="row business-info puser-info">
                <div class="col-md-4 font-weight-bold">
                  <label>Trademan Name</label>
                  <label>Registration No</label>
                  <label>Traveling Distance</label>
                  <label>Skills</label>
                  <label>City</label>
                  <label>Business Address</label>
                </div>
                <div class="col-md-8">
                  <label>{{businessProfile.tradeName !=null && businessProfile.tradeName != '' ? businessProfile.tradeName.length > 50 ?  businessProfile.tradeName.substring(0,50) : businessProfile.tradeName : '-'}}</label>
                  <label>{{businessProfile.registrationNo !=null && businessProfile.registrationNo != ''  ? businessProfile.registrationNo : '-'}}</label>
                  <label>{{businessProfile.travellingDistance !=null && businessProfile.travellingDistance != '' ? businessProfile.travellingDistance + ' KM' : '-' }}</label>
                  <label *ngIf="businessProfile.skills !=null; else elseBlock;">{{businessProfile.skills !=null && businessProfile.skills !='' ? businessProfile.skills.length > 40 ? businessProfile.skills.substring(0,30) : businessProfile.skills : '-'}} <i *ngIf="businessProfile.skills.length > 40 " class="fa fa-eye" placement="top" ngbPopover={{businessProfile.skills}} popoverTitle="Skills"></i></label>
                  <ng-template #elseBlock>
                    <label>-</label>
                  </ng-template>
                  <label>{{businessProfile.city !=null && businessProfile.city != ''? businessProfile.city : '-'}}</label>-->
  <!--<label>{{businessProfile.businessAddress !=null ? businessProfile.businessAddress.length > 86 ?  businessProfile.businessAddress.length.substring(0,85) : businessProfile.businessAddress  : '-' }} <i *ngIf="businessProfile.businessAddress !=null && businessProfile.businessAddress.length > 86 " class="fa fa-eye" placement="top" ngbPopover={{businessProfile.businessAddress}} popoverTitle="Business Address"></i></label>-->
  <!--<label>{{businessProfile.businessAddress !=null && businessProfile.businessAddress != ''? businessProfile.businessAddress : '-' }}</label>
      </div>
    </div>
  </div>
  <div class="col-md-12">
    <div class="card shadow mb-4 mt-5">
      <div class="card-header justify-header">
        <h6 class="m-0 font-weight-bold">Recent Jobs Feedback</h6>
        <div class="g-pagination">
          Total Completed Jobs {{totalTradesmanJobs}}
        </div>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-bordered table-striped table-hover" id="dataTable" width="100%" cellspacing="0">
            <thead>
              <tr>
                <th width="2%">JID</th>
                <th width="8%">Job Title</th>
                <th width="15%">Comment</th>
                <th width="2%" title="Tradesman Count">Rating</th>
                <th width="4%" title="Tradesman Percentage">Start Data</th>
                <th width="4%" title="Tradesman Count">End date</th>-->
  <!--<th width="2%" title="Tradesman Count">Avg ratings</th>-->
  <!--</tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of tradesmanRating">
                          <td>{{item?.jdId}}</td>
                          <td>{{item?.title}}</td>
                          <td>{{item?.comments}}</td>
                          <td>{{item?.tradesmanRating}}</td>
                          <td>{{item?.endDate |  date: "dd MMM yyy"}}</td>
                          <td>{{item?.startDate | date: "dd MMM yyy"}}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <p *ngIf="jobsRating > 0" class="fa-pull-right text-danger">Avrage Rating {{ (jobsRating / totalTradesmanJobs).toFixed(2)}}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary btn-sm" (click)="hidemodal()" data-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
  </div>-->

  <!-- Tradesman Details Modal -->
  <ng-template #profileModal let-modal>
    <div class="job-details-model">
      <div class="modal-content">
        <div class="modal-header flex-column">
          <div class="modal-body" style="width:100%;">
            <section class="section-inner">
              <div class="container-fluid">
                <div class="row">
                  <div class="col-lg-12 user-header" style="min-height:150px;">
                    <div class="user-image">
                      <ng-container *ngIf="businessProfile.profileImage !=null; else noThumbnail">
                        <img [src]="service.transform(businessProfile.profileImage)" alt="...">
                      </ng-container>
                      <ng-template #noThumbnail>
                        <img height="280" width="280" class="figure-img rounded" src="../../../assets/img/user-placeholder.png" alt="">
                      </ng-template>
                    </div>
                    <div>
                      <h4 class="d-block">{{businessProfile.firstName}} {{businessProfile.lastName}}</h4>
                      <h4>Credit : Rs.{{walletAmount}}</h4>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-3 col-md-4 sidebar-list pl-0">
                    <ul class="list-group">
                      <li class="list-group-item">
                        <i class="fas fa-phone-alt mr-2"></i> <span style="font-size:1.25rem;font-weight:500">{{businessProfile.mobile !=null ? businessProfile.mobile : '-'}}</span>
                        <p><i class="fas fa-envelope mr-2"></i>{{businessProfile.email !=null && businessProfile.email !='' ? businessProfile.email : '-' }}</p>
                      </li>
                      <li class="list-group-item">
                        <h5>Organization CNIC</h5>
                        <p>{{businessProfile.cnic !=null && businessProfile.cnic !='' ? businessProfile.cnic : '-' }}</p>
                      </li>
                      <li class="list-group-item">
                        <h5>Gender</h5>
                        <p *ngIf="businessProfile.gender == 1">Male</p>
                        <p *ngIf="businessProfile.gender == 2">Female</p>
                        <p *ngIf="businessProfile.gender ==3">Other</p>
                        <p *ngIf="!businessProfile.gender">-</p>
                      </li>
                      <li class="list-group-item">
                        <h5>DOB</h5>
                        <p>{{businessProfile?.dob ? (businessProfile.dob | date:'dd MMM yyyy')  : '-'}}</p>
                      </li>
                    </ul>
                  </div>
                  <div class="col-lg-9 col-md-8 user-penal">
                    <ngb-tabset [destroyOnHide]="false">
                      <!-- Business Address -->
                      <ngb-tab title="Business Address">
                        <ng-template ngbTabContent>
                          <div class="tab-content">
                            <div class="table-responsive">
                              <table class="table table-bordered table-striped table-hover" id="dataTable" width="100%" cellspacing="0" #dataTable>
                                <thead>
                                  <tr>
                                    <th width="5%">Trademan Name</th>
                                    <th width="3%">Registration No</th>
                                    <th title="Date" width="3%">Traveling Distance</th>
                                    <th width="4%" title="Method">Skills</th>
                                    <th width="4%" title="Discount">City</th>
                                    <th width="4%">Business Address</th>
                                  </tr>
                                </thead>
                                <tbody class="table-content-fs">
                                  <tr>
                                    <td>{{businessProfile.tradeName !=null && businessProfile.tradeName != '' ? businessProfile.tradeName.length > 50 ?  businessProfile.tradeName.substring(0,50) : businessProfile.tradeName : '-'}}</td>
                                    <td>{{businessProfile.registrationNo !=null && businessProfile.registrationNo != '' ? businessProfile.registrationNo : '-'}}</td>
                                    <td>{{businessProfile.travellingDistance !=null && businessProfile.travellingDistance != '' ? businessProfile.travellingDistance + ' KM' : '-' }}</td>
                                    <td *ngIf="businessProfile.skills !=null; else elseBlock;">{{businessProfile.skills !=null && businessProfile.skills !='' ? businessProfile.skills.length > 40 ? businessProfile.skills.substring(0,30) : businessProfile.skills : '-'}} <i *ngIf="businessProfile.skills.length > 40 " class="fa fa-eye" placement="top" ngbPopover={{businessProfile.skills}} popoverTitle="Skills"></i></td>
                                    <ng-template #elseBlock>
                                      <td>-</td>
                                    </ng-template>
                                    <td>{{businessProfile.city !=null && businessProfile.city != '' ? businessProfile.city : '-'}}</td>
                                    <td>{{businessProfile.businessAddress !=null && businessProfile.businessAddress != '' ? businessProfile.businessAddress : '-' }}</td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </ng-template>
                      </ngb-tab>
                      <!--Recent Job Feedback-->
                      <ngb-tab title="Recent Jobs Feedback">
                        <ng-template ngbTabContent>
                          <div class="tab-content">
                            <div class="row">
                              <div class="table-responsive">
                                <table class="table table-bordered table-striped table-hover" id="dataTable" width="100%" cellspacing="0">
                                  <thead>
                                    <tr>
                                      <th width="2%">JID</th>
                                      <th width="8%">Job Title</th>
                                      <th width="15%">Comment</th>
                                      <th width="2%" title="Tradesman Count">Rating</th>
                                      <th width="4%" title="Tradesman Percentage">Start Data</th>
                                      <th width="4%" title="Tradesman Count">End date</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr *ngFor="let item of tradesmanRating">
                                      <td>{{item?.jdId}}</td>
                                      <td>{{item?.title}}</td>
                                      <td>{{item?.comments}}</td>
                                      <td>{{item?.tradesmanRating}}</td>
                                      <td>{{item?.endDate |  date: "dd MMM yyy"}}</td>
                                      <td>{{item?.startDate | date: "dd MMM yyy"}}</td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>

                            </div>
                          </div>
                        </ng-template>
                      </ngb-tab>
                      <!--Organization Payment History-->
                      <ngb-tab title="Payment History">
                        <ng-template ngbTabContent>
                          <div class="tab-content">
                            <div class="table-responsive">
                              <table class="table table-bordered table-striped table-hover" id="dataTable" width="100%" cellspacing="0" #dataTable>
                                <thead>
                                  <tr>
                                    <th scope="col">SR</th>
                                    <th scope="col">Task ID</th>
                                    <th scope="col">Agreed Budget</th>
                                    <th scope="col">Additional Charges</th>
                                    <th scope="col">Total Amount</th>
                                    <th scope="col">Discount</th>
                                    <th scope="col">Commission</th>
                                    <th scope="col" title="PayableByHoomwork">Paid By HW</th>
                                    <th scope="col" title="Paid Via Wallet">Paid Via Wallet</th>
                                    <th scope="col" title="Paid By Customer">Paid By Customer</th>
                                    <th scope="col" title="Payment Method">Payment Method</th>
                                    <th scope="col" >Date</th>
                                  </tr>
                                </thead>
                                <tbody class="table-content-fs">
                                  <tr *ngFor="let item of getInvoicesList; let i=index">
                                    <td>{{i+1}}</td>
                                    <td>{{item.jobQuotationId}}</td>
                                    <td>Rs. {{item.tradesmanInitialBudget  | number:'1.0':'en-US'}}</td>
                                    <td>Rs. {{item.additionalCharges  | number:'1.0':'en-US'}}</td>
                                    <td>Rs. {{item.amount  | number:'1.0':'en-US'}}</td>
                                    <td>Rs. {{item.discountedAmount  | number:'1.0':'en-US'}}</td>
                                    <td>Rs. {{item.commission  | number:'1.0':'en-US'}}</td>
                                    <td>Rs. {{item.netPayableToTradesman  | number:'1.0':'en-US'}}</td>
                                    <td>Rs. {{item.paidViaWallet  | number:'1.0':'en-US'}}</td>
                                    <td>Rs. {{item.payableAmount  | number:'1.0':'en-US'}}</td>
                                    <td *ngIf="item.paymentStatus == 1;">JazzCash</td>
                                    <td *ngIf="item.paymentStatus == 4;">Wallet</td>
                                    <td *ngIf="item.paymentStatus != 4 && item.paymentStatus != 1;">Cash</td>
                                    <td>{{item.paymentMonth}}</td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </ng-template>
                      </ngb-tab>
                    </ngb-tabset>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
    </div>
  </ng-template>



  <ng-template #content1 let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Confirmation Required</h4>
      <!--<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>-->
    </div>
    <div class="modal-body">
      <h6>Are you want to change user type ?</h6>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-sm btn-primary" value="true" (click)="confrimCreateTest();modal.close()">Ok</button>
      <button type="button" class="btn btn-primary btn-sm" (click)="modal.close('Save click')">Cancel</button>
    </div>
  </ng-template>
  <ng-template #contentsales let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Select Salesman</h4>
      <!--<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>-->
    </div>
    <div class="modal-body">
      <form [formGroup]="pkgForm">
        <input type="hidden" formControlName="salesmanId" />
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <label class="fs-12">Salesman Name</label>
              <select class="form-control" formControlName="salesmanId">
                <!--<option *ngfor="let x of salesmanList;" [value]="x.salesmanId" >{{x.name}}</option>-->
                <option *ngFor="let item of salesmanList;" [value]="item.salesmanId">{{item.name}}</option>
              </select>
              <div *ngIf="f1.salesmanId?.errors">
                <div *ngIf="f1.salesmanId.invalid && submited">
                  <small *ngIf="f1.salesmanId.errors?.required" class="text-danger">Name is requried</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-sm btn-primary" value="true" (click)="SavelinkedSaleman();">Ok</button>
      <button type="button" class="btn btn-primary btn-sm" (click)="modal.close('Save click')">Cancel</button>
    </div>
  </ng-template>
  <ng-template #contentdeleteuser let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Confirmation Required</h4>
      <!--<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>-->
    </div>
    <div class="modal-body">
      <blockquote>Before delete please make sure selected organisation are test organisation</blockquote>
      <h6>Are you want to delete organisation ?</h6>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-sm btn-primary" value="true" (click)="DeleteUsersConfirm();modal.close()">Ok</button>
      <button type="button" class="btn btn-primary btn-sm" (click)="modal.close('Save click')">Cancel</button>
    </div>
  </ng-template>
  <ng-template #addNewSupplier let-modal>
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <h6 class="modal-title">Add Organization Tradesman</h6>
        <button type="button" class="close" (click)="modal.close('Save Click')" style="outline:none;">&times;</button>
      </div>
      <!-- Modal body -->
      <div class="modal-body">
        <!--<div id="collapse3" class="contentWrapper fs-12 collapse" #checkParent>-->
        <div class="card-body">
          <form [formGroup]="appValForm" class="row emp-profile" novalidate>
            <input type="text" class="form-control " hidden formControlName="tradesmanId">
            <input type="text" class="form-control" hidden formControlName="userId">
            <div class="col-md-12 profile">

              <fieldset>
                <div class="form-row mt-3">
                  <!-- <div class="form-group col-md-12 border-bottom"><h5>{{fullName}}</h5></div>-->
                  <div class="form-group col-md-6">
                    <label for="firstName">First Name</label>
                    <input type="text" class="form-control" minlength="1" maxlength="18" formControlName="firstName" placeholder="First Name" (keypress)="service.omit_special_char($event)">
                    <div *ngIf="f.firstName?.errors">
                      <div *ngIf="f.firstName.invalid  && (f.firstName.touched || f.firstName.dirty)">
                        <small class="text-danger" *ngIf="f.firstName.errors?.required"> * Please enter first name.</small>
                        <small class="text-danger" *ngIf="f.firstName.errors?.minlength">* first name allow minimum 1 characters</small>
                        <!--<small class="text-danger" *ngIf="f.firstName.errors?.pattern">* Please provide a valid name.</small>-->
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="lastName">Last Name</label>
                    <input type="text" class="form-control" minlength="1" maxlength="18" formControlName="lastName" placeholder="Last Name" (keypress)="service.omit_special_char($event)">
                    <div *ngIf="f.lastName?.errors">
                      <div *ngIf="f.lastName.invalid  && (f.lastName.touched || f.lastName.dirty)">
                        <small class="text-danger" *ngIf="f.lastName.errors?.required">* Please enter last name.</small>
                        <small class="text-danger" *ngIf="f.lastName.errors?.minlength">* last name allows minimum 1 characters</small>
                        <!--<small class="text-danger" *ngIf="f.lastName.errors?.pattern">* Please provide a valid name.</small>-->
                      </div>
                    </div>
                  </div>

                  <div class="form-group col-md-6">
                    <label for="email">Email</label>
                    <input type="text" class="form-control" maxlength="40" formControlName="email" placeholder="Email">
                    <div *ngIf="f.email?.errors">
                      <div *ngIf="f.email.invalid  && (f.email.touched || f.email.dirty)">
                        <small class="text-danger" *ngIf="f.email.errors?.required">* Please enter email.</small>
                        <small class="text-danger" *ngIf="f.email.errors?.pattern">* Please provide a valid email address</small>
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="phone">Phone</label>
                    <input type="text" class="form-control" maxlength="11" formControlName="mobileNumber" placeholder="Phone" (keypress)="service.numberOnly($event)" />
                    <div *ngIf="f.mobileNumber?.errors">
                      <div *ngIf="f.mobileNumber.invalid && (f.mobileNumber.touched || f.mobileNumber.dirty)">
                        <small class="text-danger" *ngIf="f.mobileNumber.errors?.required"> * Please enter your phone number.</small>
                        <small class="text-danger" *ngIf="f.mobileNumber.errors?.pattern"> * Please provide a valid 11 digit phone number</small>
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="cnic">CNIC</label>
                    <input type="text" class="form-control" maxlength="13" formControlName="cnic" placeholder="CNIC" (keypress)="service.numberOnly($event)">
                  </div>
                  <div class="form-group col-md-6">
                    <label for="gender">Gender</label>
                    <select formControlName="gender" class="form-control">
                      <option value="1">Male</option>
                      <option value="2">Female</option>
                      <option value="3">Other</option>
                    </select>
                    <div *ngIf="f.gender?.errors">
                      <div *ngIf="f.gender.invalid && (f.gender.touched || f.gender.dirty )">
                        <small class="text-danger" *ngIf="f.gender.errors?.required"> * Please select your gender</small>
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="dob">Date Of Birth</label>
                    <input class="form-control" formControlName="dateOfBirth" max="2010-01-01" type="date" [ngModel]="BirthDate | date:'yyyy-MM-dd'" />
                    <div *ngIf="f.dateOfBirth?.errors">
                      <div *ngIf="f.dateOfBirth.invalid && (f.dateOfBirth.touched || f.dateOfBirth.dirty)">
                        <small class="text-danger" *ngIf="f.dateOfBirth.errors?.required">* Please select date of birth.</small>
                      </div>
                    </div>
                  </div>


                  <h6 class="form-group col-md-12 mt-2">About Your bussiness</h6>
                  <div class="form-group col-md-6">
                    <label for="primaryTrade">What Describe You best</label>
                    <select formControlName="isOrganization" class="form-control" (change)="setfields($event)">
                      <option [value]="null" selected disabled>--- Select Tradesman Type ---</option>
                      <option [value]="1">Organization</option>
                    </select>
                    <div *ngIf="f.isOrganization?.errors">
                      <div *ngIf="f.isOrganization.invalid && (f.isOrganization.touched || f.isOrganization.dirty )">
                        <small class="text-danger" *ngIf="f.isOrganization.errors?.required"> * Please select your tradesman type.</small>
                      </div>
                    </div>

                    <!--<div class="form-control" *ngIf="isOrganization== true">Organization </div>
                    <div class="form-control" *ngIf="isOrganization!= true">Sole trader</div>-->
                  </div>
                  <div class="form-group col-md-6">
                    <label for="describeYouBest">Delivery Radius</label>
                    <select formControlName="travelingDistance" class="form-control">
                      <option [value]="10">10 KM</option>
                      <option [value]="20">20 KM</option>
                      <option [value]="30">30 KM</option>
                      <option [value]="40">40 KM</option>
                      <option [value]="50">50 KM</option>
                      <option [value]="60">60 KM</option>
                      <option [value]="70">70 KM</option>

                    </select>
                    <div *ngIf="f.travelingDistance?.errors">
                      <div *ngIf="f.travelingDistance.invalid && (f.travelingDistance.touched || f.travelingDistance.dirty )">
                        <small class="text-danger" *ngIf="f.travelingDistance.errors?.required"> * Please select your radius</small>
                      </div>
                    </div>
                  </div>
                  <!--<div class="form-group col-md-6">
                    <label for="describeYouBest">Delivery Radius</label>
                    <select formControlName="travelingDistance" class="form-control">
                      <option *ngFor="let item of DeliveryRadiousList;" [value]="item.id">{{item.id}}  {{item.value}}</option>

                    </select>
                  </div>-->
                  <div class="form-group col-md-6" *ngIf="isOrganization">
                    <label for="tradeName">Trade Name</label>
                    <input type="text" class="form-control" maxlength="30" formControlName="companyName" placeholder="Trade Name" (keypress)="service.omit_special_char($event)">
                    <!--<div *ngIf="f.companyName?.errors">
                      <div *ngIf="f.companyName.invalid && (f.companyName.touched || f.companyName.dirty)">
                        <small class="text-danger" *ngIf="f.companyName.errors?.required">* Please enter your company name.</small>
                        <small class="text-danger" *ngIf="f.companyName.errors?.pattern">* Please provide a valid company name.</small>
                      </div>
                    </div>-->
                  </div>
                  <div class="form-group col-md-6" *ngIf="isOrganization">
                    <label for="companyRegistration">Company Registration Number</label>
                    <input type="text" class="form-control" maxlength="10" formControlName="companyRegNo" placeholder="Registration Number" (keypress)="service.numberOnly($event)">
                    <!--<div *ngIf="f.companyRegNo?.errors">
                      <div *ngIf="f.companyRegNo.invalid && (f.companyRegNo.touched || f.companyRegNo.dirty)">
                        <small class="text-danger" *ngIf="f.companyRegNo.errors?.required">* Please enter your company register number.</small>
                        <small class="text-danger" *ngIf="f.companyRegNo.errors?.pattern">* Please provide a valid register number</small>
                      </div>
                    </div>-->
                  </div>

                  <div class="form-group col-md-12">
                    <label>What Services Offer?</label>
                    <ng-multiselect-dropdown [placeholder]="'Search...'"
                                             [settings]="skillsdropdownSettings"
                                             [data]="skillList"
                                             formControlName="tradesmanSkills"
                                             [(ngModel)]="selectedTradesmanskillCategory">
                    </ng-multiselect-dropdown>
                    <div *ngIf="f.tradesmanSkills?.errors">
                      <div *ngIf="f.tradesmanSkills.invalid && (f.tradesmanSkills.touched || f.tradesmanSkills.dirty )">
                        <span class="text-danger" *ngIf="f.tradesmanSkills.errors?.required">Please select at least one service.</span>
                      </div>
                    </div>
                  </div>
                  <!--********************Business Address*********************-->
                  <h6 class="form-group col-md-12 mt-2">Business Address</h6>
                  <div class="form-group col-md-6">
                    <label for="cityName">City</label>
                    <select formControlName="cityId" (change)="CityValue($event)" class="form-control">
                      <option *ngFor="let item of cityList;" [value]="item.id">{{item.value}}</option>
                    </select>
                    <div *ngIf="f.cityId?.errors">
                      <div *ngIf="f.cityId.invalid && (f.cityId.touched || f.cityId.dirty )">
                        <small class="text-danger" *ngIf="f.cityId.errors?.required"> * Please select your city</small>
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="businessAddress">Town</label>
                    <ng-autocomplete [data]="townVm"
                                     formControlName="town"
                                     [searchKeyword]="keyword"
                                     (selected)='selectEvent($event)'
                                     (inputCleared)='unselectEvent($event)'
                                     placeholder="Please Select Town"
                                     [itemTemplate]="itemTemplate"
                                     [notFoundTemplate]="notFoundTemplate">
                    </ng-autocomplete>

                    <ng-template #itemTemplate let-item>
                      <a [innerHTML]="item.name"></a>
                    </ng-template>

                    <ng-template #notFoundTemplate let-notFound>
                      <div [innerHTML]="notFound"></div>
                    </ng-template>
                    <div *ngIf="f.town?.errors">
                      <div *ngIf="f.town.invalid && (f.town.touched || f.town.dirty )">
                        <small class="text-danger" *ngIf="f.town.errors?.required"> * Please select your town</small>
                      </div>
                    </div>
                  </div>

                  <div class="form-group col-md-12">
                    <label for="businessAddress">Business Address</label>
                    <textarea maxlength="250" class="form-control desc" formControlName="businessAddress"></textarea>
                    <span class="text-danger" *ngIf="submittedForm && f.businessAddress.errors?.maxlength">Please enter your business address within 100 characters</span>
                  </div>
                </div>
              </fieldset>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success" (click)="submitDetails()">Save</button>
          <button type="button" class="btn btn-danger" (click)="modal.close('Save Click')">Close</button>
        </div>

      </div>
    </div>
  </ng-template>
</div>

<ng-template #analyticsModal let-modal>
  <div class="">
    <div class="modal-xl">
      <div class="modal-header flex-column">
        <h5 class="text-primary">Statistical Analysis</h5>
      </div>
      <div class="modal-body" style="width:100%;">
        <h6 class="btn-primary py-1 pl-2"> Organization Tradesman Information</h6>
        <div class="row modal-primary-user-info">
          <div class="col-6 col-xl-6 puser-info">
            <div class="row">
              <div class="col-md-6 font-weight-bold">
                <label>IP Address</label>
                <label>Device</label>
                <label>IP Location</label>
                <label>Application Type</label>
                <label>Application Version</label>
                <label>Platfrom</label>
                <label>OS</label>
                <label>OS Version</label>
                <label>Browser</label>

              </div>
              <div class=" offset-md-2 col-md-4 ">
                <label>{{analytic?.ip ? analytic.ip: '-'}}</label>
                <label>{{analytic?.device ? analytic.device : '-'}}</label>
                <label>{{(analytic?.ipLocation) ? (analytic?.ipLocation | slice:0:25)+'...' : '-'}}</label>
                <label>{{analytic?.applicationType ? analytic.applicationType : '-'}}</label>
                <label>{{analytic?.applicaitonVersion ? analytic.applicaitonVersion : '-'}}</label>
                <label>{{analytic?.platform  ? analytic.platform : '-'}}</label>
                <label>{{analytic?.os ? analytic.os : '-' }}</label>
                <label>{{analytic?.osVersion  ? analytic.osVersion: '-'}}</label>
                <label>{{analytic?.browser ? analytic.browser: '-' }}</label>
              </div>
            </div>
          </div>
          <div class="col-6 col-xl-6 puser-info">
            <div class="row">
              <div class="col-md-6 font-weight-bold">
                <label>Browser Version</label>
                <label>Desktop Device</label>
                <label>Tablet Device</label>
                <label>Mobile Device</label>
                <label>Country</label>
                <label>Country Capital</label>
                <label>City</label>
                <label>District</label>
              </div>
              <div class="offset-md-3 col-md-3 ">
                <label>{{analytic?.browserVersion ? analytic.browserVersion : '-'}}</label>
                <label>{{analytic?.desktopDevice == true ? 'Yes' : 'No'}}</label>
                <label>{{analytic?.tabletDevice == true ? 'Yes' : 'No'}}</label>
                <label>{{analytic?.mobileDevice == true ? 'Yes' : 'No' }}</label>
                <label>{{analytic?.country? analytic.country : '-'}}</label>
                <label>{{analytic?.countryCapital ? analytic.countryCapital : '-' }}</label>
                <label>{{analytic?.city ? analytic.city : '-' }}</label>
                <label>{{analytic?.district ? analytic.district : '-'}}</label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-primary btn-sm" (click)="modal.close('close');">Close</button>
    </div>
  </div>
</ng-template>
