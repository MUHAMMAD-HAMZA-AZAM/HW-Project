<style>
  .modal-header .close {
    padding: 0px;
    margin: 0px;
  }
</style>
<div class="container-fluid">
  <div class="aj-heading-wrapper">
    <div style="min-width:10%">
      <h5>Suppliers</h5>
    </div>
    <div class="active-job-details" style="min-width:90%;justify-content:flex-start !important">
      <div class="active-job-box" style="margin-right:.33%">
        <h6 class="text-success">Supplier: {{supplierStatsVM.supplierCount}}</h6>
      </div>
      <div class="active-job-box">
        <h6 class="text-danger">Ads: {{supplierStatsVM.supplierAdsCount}}</h6>
      </div>
    </div>
  </div>


  <div class="contentWrapper">
    <div class="row">
      <div class="col-md-4">
        <h6 class="mainTitle" data-toggle="collapse" href="#collapse3" aria-expanded="true">Search Supplier</h6>
      </div>
    </div>
    <div id="collapse3" class="contentWrapper fs-12 collapse " #checkParent>
      <form #checkParent>
        <div class="row">
          <div class="col-md-4">
            <label for="customerName">Supplier Name</label>
            <div class="input-group">
              <input type="text" autocomplete="off" id="supplierName" maxlength="30" name="supplierName" class="form-control" [(ngModel)]="supplierName" placeholder="Supplier Name" (keypress)="service.omit_special_char($event)" />
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <input type="radio" value="1" id="start" (click)="getRadioValue($event)" name="groupOfDefaultRadios" checked>
                  <label class="" for="start">Start</label>
                  <input type="radio" class="" (click)="getRadioValue($event)" value="2" id="anyWhere" name="groupOfDefaultRadios">
                  <label class="" for="anyWhere">Anywhere</label>
                  <input type="radio" class="" value="3" id="end" (click)="getRadioValue($event)" name="groupOfDefaultRadios">
                  <label class="" for="end">End</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-2">
            <label class="">Start Date</label>
            <input type="date" id="startDate" [(ngModel)]="startDate" name="startDate" class="form-control" />
            <div *ngIf="submittedApplicationForm" class="invalid-feedback">
              <div><p>{{startDateErrorMessage}}</p></div>
            </div>
          </div>
          <div class="col-md-2">
            <label class="">End Date</label>
            <input type="date" id="endDate" [(ngModel)]="endDate" name="endDate" class="form-control" />
            <div *ngIf="submittedApplicationForm" class="invalid-feedback">
              <div><p>{{endDateErrorMessage}}</p></div>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-2">
            <label class="">Supplier Type</label>
            <ng-multiselect-dropdown placeholder="Supplier Types" style="display:inline; vertical-align:top"
                                     [settings]="supplierdropdownSettings"
                                     [data]="categoryList"
                                     [(ngModel)]="selectedSupplierType"
                                     name="selectedSupplierType"
                                     (onSelect)="onItemSelect($event)"
                                     (onSelectAll)="onItemSelectAll($event)"
                                     (onDeSelect)="OnItemDeSelect($event)"
                                     (onDeSelectAll)="OnItemDeSelectALL($event)"
                                     (OnDeSelect)="OnItemDeSelect($event)">
            </ng-multiselect-dropdown>
          </div>
          <div class="col-md-2">
            <label class="">City</label>
            <ng-multiselect-dropdown placeholder="City" style="display:inline;"
                                     [settings]="dropdownListForCity"
                                     [data]="cityList"
                                     [(ngModel)]="selectedCities"
                                     name="selectedCities"
                                     (onSelect)="onCitySelect($event)"
                                     (onSelectAll)="onCitySelectAll($event)"
                                     (onDeSelect)="onCityDeSelect($event)"
                                     (onDeSelectAll)="onCityDeSelectALL($event)"
                                     (OnDeSelect)="onCityDeSelect($event)">
            </ng-multiselect-dropdown>
          </div>

        </div>
        <div class="row mt-1">
          <div class="col-md-2 ">
            <div class="form-group  ">
              <label for="cnic">CNIC</label>
              <input type="text" class="form-control" [(ngModel)]="cnic" maxlength="13" id="cnic" name="cnic" placeholder="CNIC" (keypress)="service.numberOnly($event)" />
            </div>
          </div>
          <div class="col-md-2 ">
            <div class="form-group  ">
              <label for="cnic">Mobile Number</label>
              <input type="text" class="form-control" [(ngModel)]="mobile" maxlength="11" id="Mobile" name="Mobile" placeholder="Mobile Number" (keypress)="service.numberOnly($event)" />
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-2">
            <label class="">Salesman</label>
            <ng-multiselect-dropdown placeholder="Salesman" style="display:inline;"
                                     [settings]="salesmandropdownSettings"
                                     [data]="salesmanList1"
                                     [(ngModel)]="selectedsalesman"
                                     name="selectedsalesman">

            </ng-multiselect-dropdown>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-2 ">
            <div class="form-group  ">
              <label for="cnic">Email</label>
              <input type="text" class="form-control" [(ngModel)]="email" maxlength="40" id="email" name="email" placeholder="Email" />
            </div>
          </div>
          <div class="col-md-2 addressSearch">
            <div class="form-group  ">
              <label for="businessAddress">Location</label>
              <input type="text" class="form-control desc" [(ngModel)]="location" maxlength="50" placeholder="Location" id="location" name="location" autocomplete="off" autocapitalize="off" spellcheck="off" #search />
            </div>
            <div class="addressSearchResult" *ngIf="isAddress">
              <ul>
                <li *ngFor="let address of searchedAddress">
                  <a (click)="setAddressValue($event)">{{address.customerAddress}}</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-4">
            <div class="form-group">
              <label>User Type</label>
              <div class="input-group-prepend">
                <div class="input-group-text user-type">
                  <input type="radio" value="3" id="all" (click)="getRadioValueut($event)" name="groupOfDefaultRadios1" checked>
                  <label class="" for="all">All User</label>
                  <input type="radio" value="1" id="real" (click)="getRadioValueut($event)" name="groupOfDefaultRadios1">
                  <label class="" for="real">Real User</label>
                  <input type="radio" class="" (click)="getRadioValueut($event)" value="2" id="test" name="groupOfDefaultRadios1">
                  <label class="" for="test">Test User</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-4">
            <div class="form-group">
              <label>Email Verification Type</label>
              <div class="input-group-prepend">
                <div class="input-group-text user-type">
                  <input type="radio" value="1" id="all1" (click)="getRadioValueemail($event)" name="groupOfDefaultRadios2" checked #restChecked>
                  <label class="" for="all1">All User</label>
                  <input type="radio" value="2" id="real1" (click)="getRadioValueemail($event)" name="groupOfDefaultRadios2">
                  <label class="" for="real1">Email Verifyed</label>
                  <input type="radio" class="" (click)="getRadioValueemail($event)" value="3" id="test1" name="groupOfDefaultRadios2">
                  <label class="" for="test1">Email Unverifyed</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-4">
            <div class="form-group">
              <label>Mobile Verification Type</label>
              <div class="input-group-prepend">
                <div class="input-group-text user-type">
                  <input type="radio" value="1" id="allMobileUsers" (click)="getRadioValueMobileNo($event)" name="groupOfDefaultRadios3" checked>
                  <label class="" for="allMobileUsers">All User</label>
                  <input type="radio" value="2" id="verifiedMobileUser" (click)="getRadioValueMobileNo($event)" name="groupOfDefaultRadios3">
                  <label class="" for="verifiedMobileUser">Mobile Verified</label>
                  <input type="radio" class="" (click)="getRadioValueMobileNo($event)" value="3" id="unVerifiedMobileUser1" name="groupOfDefaultRadios3">
                  <label class="" for="unVerifiedMobileUser1">Mobile Unverified</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col-md-4">
            <div class="form-group">
              <label>Source Of Reg</label>
              <div class="input-group-prepend">
                <div class="input-group-text user-type">
                  <input type="radio" value="0" id="allMobileUsers11" (click)="getRadioValuesource($event)" name="groupOfDefaultRadios41" checked>
                  <label class="" for="allMobileUsers11">All User</label>
                  <input type="radio" value="1" id="verifiedMobileUser1" (click)="getRadioValuesource($event)" name="groupOfDefaultRadios41">
                  <label class="" for="verifiedMobileUser1">Custom</label>
                  <input type="radio" class="" (click)="getRadioValuesource($event)" value="2" id="unVerifiedMobileUser21" name="groupOfDefaultRadios41">
                  <label class="" for="unVerifiedMobileUser21">Facebook</label>
                  <input type="radio" class="" (click)="getRadioValuesource($event)" value="3" id="unVerifiedMobileUser21" name="groupOfDefaultRadios41">
                  <label class="" for="unVerifiedMobileUser21">Google</label>
                  <input type="radio" class="" (click)="getRadioValuesource($event)" value="4" id="unVerifiedMobileUser21" name="groupOfDefaultRadios41">
                  <label class="" for="unVerifiedMobileUser21">Apple</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4 inline-downlod-btns">
            <div class="form-group">
              <input class="btn btn-primary btn-sm" type="submit" value="Search" (click)="populateSupplierList()" />
            </div>
            <div class="form-group">
              <input class="btn btn-primary btn-sm" type="reset" (click)="resetForm()" value="Reset" />
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="inline-downlod-btns justify-content-end" *ngIf="supplierListVM.length > 0">
    <div class="form-group ml-2" *ngIf=" selecteddatasingle.length> 0 && userRole.allowDelete">
      <input class="btn btn-primary btn-sm" type="button" value="Delete Supplier" (click)="DeleteSelectedUser(contentdeleteuser)" />
    </div>
    <div class="form-group ml-2" *ngIf="selecteddatasingle.length> 0 && userRole.allowAdd">
      <input class="btn btn-primary btn-sm" type="button" value="Link With Salesman" (click)="SalesmanConfirm(contentsales)" />
    </div>
    <ng-container *ngIf="userRole.allowExport">
      <div class="form-group ml-2">
        <input class="btn btn-primary btn-sm" type="button" value="Download pdf" (click)="DownloadPdf()" />
      </div>
      <div class="form-group ml-2">
        <input class="btn btn-primary btn-sm" type="button" value="Download Excel" (click)="DownloadXlsx()" />
      </div>
      <div class="form-group ml-2">
        <input class="btn btn-primary btn-sm" type="button" value="Download Csv" (click)="exportCSV()" />
      </div>
    </ng-container>
  </div>

  <div class="card shadow mb-4" [hidden]="!dataNotFound">
    <div class="card-header justify-header">
      <h6 class="m-0 font-weight-bold">Supplier List</h6>
      <div class="fa-pull-right d-flex align-items-center">
        <button *ngIf="userRole.allowAdd" (click)="showModalAdd1('' , '',addNewSupplier)" class="btn-sm btn btn-secondary btn-sm"><i class="fa fa-plus"></i> Add New Supplier</button>
        <div class="g-pagination">
          <div class="data-count">
            <span>{{recoardNoFrom}}-{{recoardNoTo}} of {{totalRecoards}}</span>
            <div class="newOrOld-Data">
              <ul>
                <li><a (click)="LoadNewestRecoards()"> Newest</a></li>
                <li><a (click)="LoadOldestRecoards()">Oldest</a></li>
              </ul>
            </div>
          </div>
          <div class="indicators">
            <i class="fa fa-angle-left" (click)="PriviousClick()"></i>
            <i class="fa fa-angle-right" (click)="NextClick()"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="card-body">
      <div class="show_entries">
        <div class="no-of-entries">
          <label>No of Enteries</label>
          <select (change)="changePageSize()" [(ngModel)]="supplierStatsVM.pageSize">
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
        </div>
        <div class="n0-of-pages">
          <label class="">No of Pages</label>
          <select class="" [(ngModel)]="pageNumber" (change)="clickchange()">
            <option *ngFor="let item of pageing1" value="{{item}}">{{item}} </option>
          </select>
        </div>
      </div>
      <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover" id="dataTable" width="100%" cellspacing="0" #dataTable>
          <thead>
            <tr>
              <th width="1%" *ngIf="pdfrequest">Select</th>
              <th title="Supplier Id" width="1%">SID</th>
              <th width="6%">Supplier Name</th>
              <th width="5%">Email</th>
              <th width="3%">Mobile</th>
              <th width="3%">CNIC</th>
              <th class="d-none" width="3%">Supplier Type</th>
              <th width="3%">RegisterBy</th>
              <th width="5%" title="Created Date">CD</th>
              <th width="5%" title="Last Active">LA</th>
              <th width="1%" title="Email Verified">EV</th>
              <th width="1%" title="Mobile No Verified">MV</th>
              <th width="3%">Category</th>
              <th width="3%" title="Source Of Reg">SOR</th>
              <th width="1%" title="Featured Supplier">FS</th>
              <th width="15%">Address</th>
              <th title="Live Ads" width="1%">LA<!--Live Ads--></th>
              <!--<th width="1%" title="User Type">UT</th>-->
              <th title="Details" width="1%" *ngIf="pdfrequest">Det</th>
              <th width="1%" title="Change User Type" *ngIf="userRole.allowEdit">CUT</th>
              <th title="Block Supplier User" width="1%" *ngIf="userRole.allowEdit">BSU</th>
              <th title="Edit User" width="1%" *ngIf="userRole.allowEdit">EDIT</th>
              <!--<th title="Statistical Analysis" width="1%">SA</th>-->
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let supplier of cloneList">
              <td *ngIf="supplier.isselectedforexport==true && pdfrequest"> <input type="checkbox" #checkboxes ng-checked="true" checked class="custom-checkbox checked" (change)="onCheckboxChange($event,supplier)" value={{supplier.supplierId}} /></td>
              <td *ngIf="supplier.isselectedforexport==false && pdfrequest">
                <input type="checkbox" #checkboxes ng-checked="true" class="custom-checkbox checked" (change)="onCheckboxChange($event,supplier)" value={{supplier.supplierId}} />
              </td>
              <td>{{supplier.supplierId}}</td>
              <!--<td>{{supplier.companyName != null && supplier.companyName.length > 30 ? supplier.companyName.substring(0,30) : supplier.companyName }} <i class="fa fa-eye" *ngIf="supplier.companyName != null && supplier.companyName.length > 30" placement="top" ngbPopover={{supplier.companyName}} popoverTitle="Name"></i></td>-->
              <td>{{(supplier.companyName !=null && supplier.companyName.length > 30 ) ? (supplier.companyName | slice:0:30 )+'...':(supplier.companyName)}}</td>

              <td>{{supplier.email}}</td>
              <td>{{supplier.mobileNo}}</td>
              <td>{{supplier.cnic}}</td>
              <td class="d-none" ngSwitch="{{supplier.supplierRole}}">
                 <span *ngSwitchCase = "1"> Local </span>
                 <span *ngSwitchCase = "2"> HoomWork </span>
              </td>
              <td>{{supplier.salesmanName}}</td>
              <td>{{supplier.createdOn | date: "dd MMM yyy"}}</td>
              <td>{{supplier.lastActive | date: "dd MMM yyy"}}</td>
              <td *ngIf="supplier.emailConfirmed== true ">Yes</td>
              <td *ngIf="supplier.emailConfirmed!= true ">No</td>
              <td *ngIf="supplier.phoneNumberConfirmed">Yes</td>
              <td *ngIf="!supplier.phoneNumberConfirmed">No</td>
              <td>{{supplier.supplierCategory != null && supplier.supplierCategory.length > 5 ? supplier.supplierCategory.substring(0,5) : supplier.supplierCategory }} <i class="fa fa-eye" *ngIf="supplier.supplierCategory != null && supplier.supplierCategory.length > 5" placement="top" ngbPopover={{supplier.supplierCategory}} popoverTitle="Cetegory"></i></td>
              <td>{{supplier.sourceOfReg}}</td>
              <td>{{supplier?.featuredSupplier}}</td>
              <td>{{supplier.supplierAddress != null && supplier.supplierAddress.length > 50 ? supplier.supplierAddress.substring(0,50) : supplier.supplierAddress }} <i class="fa fa-eye" *ngIf="supplier.supplierAddress != null && supplier.supplierAddress.length > 50" placement="top" ngbPopover={{supplier.supplierAddress}} popoverTitle="Address"></i></td>
              <td>{{supplier.supplierAdsCount}}</td>
              <td *ngIf="pdfrequest">
                <i class="fas fa-eye" data-target="#supplierdetailsModal" data-toggle="modal" data-backdrop="static" data-keyboard="false" (click)="GetBussinessProfile(supplier.supplierId)"></i>
              </td>
              <td *ngIf="userRole.allowEdit"><button (click)="showModel1(supplier.userId,content1)" class="border-primary fa fa-user-edit primary-color" [class.text-danger]="supplier.isTestUser" aria-hidden="true"></button></td>
              <td *ngIf="userRole.allowEdit">
                <label class="switch block-user-switch">
                  <input type="checkbox" (change)="handleChange($event)" [checked]="supplier.isActive" id="{{supplier.supplierId}}">
                  <span class="slider"></span>
                </label>
              </td>
              <td *ngIf="userRole.allowEdit"><button (click)="showModalAdd(supplier.supplierId , supplier.userId,addNewSupplier)" class="border-primary fa fa-edit primary-color" aria-hidden="true"></button></td>
              <!--<td><i class="fas fa-eye" (click)="showAnalyticsModal(supplier.supplierId,analyticsModal)"></i></td>-->
            </tr>
          </tbody>
        </table>
      </div>
      <div class="card-body" style="padding:0px !important">
        <div class="show_entries">
          <div class="no-of-entries">
            <label>No of Enteries</label>
            <select (change)="changePageSize()" [(ngModel)]="supplierStatsVM.pageSize">
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>
          <div class="n0-of-pages">
            <label class="">No of Pages</label>
            <select class="" [(ngModel)]="pageNumber" (change)="clickchange()">
              <option *ngFor="let item of pageing1" value="{{item}}">{{item}} </option>
            </select>
          </div>
        </div>
      </div>
      <div class="card-header justify-header">
        <h6 class="m-0 font-weight-bold">Supplier List</h6>
        <div class="g-pagination">
          <div class="data-count">
            <span>{{recoardNoFrom}}-{{recoardNoTo}} of {{totalRecoards}}</span>
            <div class="newOrOld-Data">
              <ul>
                <li><a (click)="LoadNewestRecoards()"> Newest</a></li>
                <li><a (click)="LoadOldestRecoards()">Oldest</a></li>
              </ul>
            </div>

          </div>
          <div class="indicators">
            <i class="fa fa-angle-left" (click)="PriviousClick()"></i>
            <i class="fa fa-angle-right" (click)="NextClick()"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div bsModal #supplierdetailsModal="bs-modal" id="supplierdetailsModal" class="modal fade">
    <div class="modal-dialog modal-confirm  modal-lg modalWidth" style=" max-width: 65%">
      <div class="modal-content">
        <div class="modal-header flex-column">
          <h5 class="text-primary">Supplier Details</h5>
          <button type="button" class="close" data-dismiss="modal"></button>
        </div>
        <div class="modal-body" style="width:100%;">
          <div class="row modal-primary-user-info">
            <div class="col-md-4">
              <figure class="figure">
                <ng-container *ngIf="businessProfile.profileImage !=null; else noThumbnail">
                  <img height="280" width="280" class="figure-img  rounded" [src]="service.transform(businessProfile.profileImage)" alt="...">
                </ng-container>
                <ng-template #noThumbnail>
                  <img height="280" width="280" class="figure-img  rounded" src="../../../assets/img/user-placeholder.png" alt="">
                </ng-template>
              </figure>
            </div>
            <div class="col-md-8">
              <h6 class="btn-primary py-1 pl-2">Personal Information</h6>
              <div class="row puser-info">
                <div class="col-md-4 font-weight-bold">
                  <label>First Name</label>
                  <label>Last name</label>
                  <label>Cnic</label>
                  <label>Date-of-Birth</label>
                  <label>Gender</label>
                  <label>Mobile</label>
                  <label>Email</label>
                  <label>Registered On</label>
                </div>
                <div class="col-md-8">
                  <label>{{businessProfile.firstName !=null ? businessProfile.firstName : '-'}}</label>
                  <label>{{businessProfile.lastName !=null ? businessProfile.lastName : '-'}}</label>
                  <label>{{businessProfile.cnic !=null && businessProfile.cnic !='' ? businessProfile.cnic : '-' }}</label>
                  <label>{{businessProfile?.dob  ? (businessProfile.dob | date:'dd MMM yyyy')  : '-'}}</label>
                  <label *ngIf="businessProfile.gender == 1">Male</label>
                  <label *ngIf="businessProfile.gender == 0">Female</label>
                  <label *ngIf="businessProfile.gender != 0 && businessProfile.gender != 1">Other</label>
                  <label>{{businessProfile.mobile !=null ? businessProfile.mobile : '-'}}</label>
                  <label>{{businessProfile.email !=null ? businessProfile.email : '-' }}</label>
                  <label>{{businessProfile.createdOn | date:'dd MMM yyyy'}}</label>
                </div>
              </div>
              <h6 class="btn-primary py-1 pl-2 mt-3">Business Information</h6>
              <div class="row business-info puser-info">
                <div class="col-md-4 font-weight-bold">
                  <label>Supplier Name</label>
                  <label>Primary Trade</label>
                  <label>Registration No</label>
                  <label>Delivery Radius</label>
                  <label>Products</label>
                  <label>City</label>
                  <label>Business Address</label>
                </div>
                <div class="col-md-8">
                  <label>{{businessProfile.tradeName !=null && businessProfile.tradeName != '' ? businessProfile.tradeName.length > 50 ?  businessProfile.tradeName.substring(0,50) : businessProfile.tradeName : '-'}}</label>
                  <label>{{businessProfile.primaryTrade !=null && businessProfile.primaryTrade != '' ? businessProfile.primaryTrade : '-'}}</label>
                  <label>{{businessProfile.registrationNo !=null && businessProfile.registrationNo != '' ? businessProfile.registrationNo : '-'}}</label>
                  <label>{{businessProfile.travellingDistance !=null && businessProfile.travellingDistance != '' ? businessProfile.travellingDistance + ' KM' : '-' }}</label>
                  <label *ngIf="businessProfile.skills !=null; else elseBlock;">{{businessProfile.skills !=null && businessProfile.skills !='' ? businessProfile.skills.length > 40 ? businessProfile.skills.substring(0,30) : businessProfile.skills : '-'}} <i *ngIf="businessProfile.skills.length > 40 " class="fa fa-eye" placement="top" ngbPopover={{businessProfile.skills}} popoverTitle="Skills"></i></label>
                  <ng-template #elseBlock>
                    <label>-</label>
                  </ng-template>

                  <label>{{businessProfile.city !=null && businessProfile.city != '' ? businessProfile.city : '-'}}</label>
                  <label>{{businessProfile.businessAddress !=null && businessProfile.businessAddress != '' ? businessProfile.businessAddress : '-' }}</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary btn-sm" (click)="hidemodal()" data-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
  </div>
  <ng-template #content1 let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Confirmation Required</h4>
    </div>
    <div class="modal-body">
      <h6>Are you want to change user type ?</h6>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-sm btn-primary" value="true" (click)="confrimCreateTest();modal.close()">Ok</button>
      <button type="button" class="btn btn-primary btn-sm" (click)="modal.close('Save click')">Cancel</button>
    </div>
  </ng-template>

  <ng-template #contentdeleteuser let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Confirmation Required</h4>
      <!--<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>-->
    </div>
    <div class="modal-body">
      <blockquote>Before delete please make sure selected suppliers are test supplier</blockquote>
      <h6>Are you want to delete Suppliers ?</h6>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-sm btn-primary" value="true" (click)="DeleteUsersConfirm();modal.close()">Ok</button>
      <button type="button" class="btn btn-primary btn-sm" (click)="modal.close('Save click')">Cancel</button>
    </div>
  </ng-template>

  <ng-template #contentsales let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Select Salesman</h4>
    </div>
    <div class="modal-body">
      <form [formGroup]="pkgForm">
        <input type="hidden" formControlName="salesmanId" />
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <label class="fs-12">Salesman Name</label>
              <select class="form-control" formControlName="salesmanId">
                <option *ngFor="let item of salesmanList;" [value]="item.salesmanId">{{item.name}}</option>
              </select>
              <div *ngIf="f1.salesmanId?.errors">
                <div *ngIf="f1.salesmanId.invalid && submited">
                  <small *ngIf="f1.salesmanId.errors?.required" class="text-danger">Name is requried</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-sm btn-primary" value="true" (click)="SavelinkedSaleman();">Ok</button>
      <button type="button" class="btn btn-primary btn-sm" (click)="modal.close('Save click')">Cancel</button>
    </div>
  </ng-template>

  <ng-template #addNewSupplier let-modal>

    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h6 class="modal-title">Add Supplier</h6>
        <button type="button" class="close" (click)="modal.close('Save Click');" style="outline:none;">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <div class="card-body">
          <form [formGroup]="appValForm" class="row emp-profile" novalidate>
            <input type="text" class="form-control " hidden formControlName="supplierId">
            <input type="text" class="form-control" hidden formControlName="userId">
            <div class="col-md-12 profile">

              <fieldset>
                <div class="form-row mt-3">
                  <div class="form-group col-md-6">
                    <label for="firstName">First Name</label>
                    <input type="text" class="form-control" minlength="1" maxlength="18" formControlName="firstName" placeholder="First Name" (keypress)="service.omit_special_char($event)">
                    <!-- Hamza DMT -->
                    <div *ngIf="f.firstName?.errors">
                      <div *ngIf="f.firstName.invalid  && (f.firstName.touched || f.firstName.dirty)">
                        <small class="text-danger" *ngIf="f.firstName.errors?.required"> * Please enter first name.</small>
                        <small class="text-danger" *ngIf="f.firstName.errors?.minlength">* first name allows minimum 1 characters</small>
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="lastName">Last Name</label>
                    <input type="text" class="form-control" minlength="1" maxlength="18" formControlName="lastName" placeholder="Last Name" (keypress)="service.omit_special_char($event)">
                    <div *ngIf="f.lastName?.errors">
                      <div *ngIf="f.lastName.invalid  && (f.lastName.touched || f.lastName.dirty)">
                        <small class="text-danger" *ngIf="f.lastName.errors?.required">* Please enter last name.</small>
                        <small class="text-danger" *ngIf="f.lastName.errors?.minlength">* last name allows minimum 1 characters</small>
                      </div>
                    </div>
                  </div>

                  <div class="form-group col-md-6">
                    <label for="email">Username</label>
                    <input type="text" class="form-control" maxlength="40" formControlName="email" placeholder="Email">
                    <div *ngIf="f.email?.errors">
                      <div *ngIf="f.email.invalid  && (f.email.touched || f.email.dirty)">
                        <small class="text-danger" *ngIf="f.email.errors?.required">* Please enter email.</small>
                        <small class="text-danger" *ngIf="f.email.errors?.pattern">* Please provide a valid email address</small>
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="phone">Phone</label>
                    <input type="text" class="form-control" maxlength="11" formControlName="mobileNumber" placeholder="Phone" (keypress)="service.numberOnly($event)" />
                    <div *ngIf="f.mobileNumber?.errors">
                      <div *ngIf="f.mobileNumber.invalid && (f.mobileNumber.touched || f.mobileNumber.dirty)">
                        <small class="text-danger" *ngIf="f.mobileNumber.errors?.required"> * Please enter your phone number.</small>
                        <small class="text-danger" *ngIf="f.mobileNumber.errors?.pattern"> * Please provide a valid 11 digit phone number</small>

                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="cnic">CNIC</label>
                    <input type="text" class="form-control" maxlength="13" formControlName="cnic" placeholder="CNIC" (keypress)="service.numberOnly($event)">
                  </div>
                  <div class="form-group col-md-6">
                    <label for="gender">Gender</label>
                    <select formControlName="gender" class="form-control">
                      <option value="1">Male</option>
                      <option value="0">Female</option>
                      <option value="3">Other</option>
                    </select>
                    <div *ngIf="f.gender?.errors">
                      <div *ngIf="f.gender.invalid && (f.gender.touched || f.gender.dirty )">
                        <small class="text-danger" *ngIf="f.gender.errors?.required"> * Please select your gender</small>
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="dob">Date Of Birth</label>
                    <input class="form-control" formControlName="dateOfBirth" type="date" max="2010-01-01" [ngModel]="BirthDate | date:'yyyy-MM-dd'" />
                    <div *ngIf="f.dateOfBirth?.errors">
                      <div *ngIf="f.dateOfBirth.invalid && (f.dateOfBirth.touched || f.dateOfBirth.dirty)">
                        <small class="text-danger" *ngIf="f.dateOfBirth.errors?.required">* Please select date of birth.</small>
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="dob">Featured Status</label>
                    <div class="form-group">
                      <label class="switch">
                        <input type="checkbox" (change)="changeFeaturedValue($event)" formControlName="featuredSupplier">
                        <span class="slider round"></span>
                      </label>
                    </div>
                  </div>
                  <!--********************About Your Business*********************-->
                  <h5 class="form-group col-md-12 mt-2">About Your Business</h5>
                  <div class="form-group col-md-6">
                    <label for="primaryTrade">Primary Trade</label>
                    <select formControlName="primaryTradeId" #mySelect (change)="onCategorySelect($event)" class="form-control">
                      <option *ngFor="let item of categoryList;" [value]="item.id">{{item.value}}</option>
                    </select>
                    <div *ngIf="f.primaryTradeId?.errors">
                      <div *ngIf="f.primaryTradeId.invalid && (f.primaryTradeId.touched || f.primaryTradeId.dirty )">
                        <small class="text-danger" *ngIf="f.primaryTradeId.errors?.required"> * Please select your primary trade.</small>
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="tradeName">Trade Name</label>
                    <input type="text" class="form-control" minlenght="1" maxlength="30" formControlName="companyName" placeholder="Trade Name" (keypress)="service.omit_special_char($event)">
                  </div>
                  <div class="form-group col-md-6">
                    <label for="companyRegistration">Company Registration Number</label>
                    <input type="text" class="form-control" maxlength="10" formControlName="registrationNumber" placeholder=" Registration Number" (keypress)="service.numberOnly($event)">
                  </div>
                  <div class="form-group col-md-6">
                    <label for="describeYouBest">Delivery Radius</label>
                    <select formControlName="deliveryRadius" class="form-control">
                      <option [value]="10">10 KM</option>
                      <option [value]="20">20 KM</option>
                      <option [value]="30">30 KM</option>
                      <option [value]="40">40 KM</option>
                      <option [value]="50">50 KM</option>
                      <option [value]="60">60 KM</option>
                      <option [value]="70">70 KM</option>

                    </select>
                    <div *ngIf="f.deliveryRadius?.errors">
                      <div *ngIf="f.deliveryRadius.invalid && (f.deliveryRadius.touched || f.deliveryRadius.dirty )">
                        <small class="text-danger" *ngIf="f.deliveryRadius.errors?.required"> * Please select your radius</small>
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-12">
                    <label for="search">What Type Of Product Offer?</label>
                    <div>
                      <ng-multiselect-dropdown [placeholder]="'Search...'"
                                               [data]="subCategoriesList"
                                               formControlName="SubCategory"
                                               [settings]="SubCategoriesdropdownSettings"
                                               [(ngModel)]="selectedItemsSubCategory">
                      </ng-multiselect-dropdown>

                    </div>

                  </div>
                  <!--********************Business Address*********************-->
                  <h5 class="form-group col-md-12 mt-2">Business Address</h5>
                  <div class="form-group col-md-12">
                    <label for="cityName">City</label>
                    <select formControlName="city" class="form-control">
                      <option *ngFor="let item of cityList;" [value]="item.id">{{item.value}}</option>
                    </select>
                    <div *ngIf="f.city?.errors">
                      <div *ngIf="f.city.invalid && (f.city.touched || f.city.dirty )">
                        <small class="text-danger" *ngIf="f.city.errors?.required"> * Please select your city</small>
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-12">
                    <label for="businessAddress">Business Address</label>
                    <textarea class="form-control desc" formControlName="businessAddress"></textarea>
                  </div>
                </div>
              </fieldset>
            </div>
          </form>
        </div>

        <!--</div>-->
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" (click)="modal.close('Save Click');">Close</button>
          <button type="submit" class="btn btn-success" (click)="submitDetails()">Save</button>
        </div>
      </div>
    </div>
  </ng-template>
</div>
<ng-template #analyticsModal let-modal>
  <div class="">
    <div class="modal-xl">
      <div class="modal-header flex-column">
        <h5 class="text-primary">Statistical Analysis</h5>
      </div>
      <div class="modal-body" style="width:100%;">
        <h6 class="btn-primary py-1 pl-2">Supplier Information</h6>
        <div class="row modal-primary-user-info">
          <div class="col-6 col-xl-6 puser-info">
            <div class="row">
              <div class="col-md-6 font-weight-bold">
                <label>IP Address</label>
                <label>Device</label>
                <label>IP Location</label>
                <label>Application Type</label>
                <label>Application Version</label>
                <label>Platfrom</label>
                <label>OS</label>
                <label>OS Version</label>
                <label>Browser</label>

              </div>
              <div class=" offset-md-2 col-md-4 ">
                <label>{{analytic?.ip ? analytic.ip: '-'}}</label>
                <label>{{analytic?.device ? analytic.device : '-'}}</label>
                <label>{{(analytic?.ipLocation) ? (analytic?.ipLocation | slice:0:25)+'...' : '-'}}</label>
                <label>{{analytic?.applicationType ? analytic.applicationType : '-'}}</label>
                <label>{{analytic?.applicaitonVersion  ? analytic.applicaitonVersion : '-'}}</label>
                <label>{{analytic?.platform ? analytic.platform : '-'}}</label>
                <label>{{analytic?.os ? analytic.os : '-' }}</label>
                <label>{{analytic?.osVersion ? analytic.osVersion: '-'}}</label>
                <label>{{analytic?.browser ? analytic.browser: '-' }}</label>
              </div>
            </div>
          </div>
          <div class="col-6 col-xl-6 puser-info">
            <div class="row">
              <div class="col-md-6 font-weight-bold">
                <label>Browser Version</label>
                <label>Desktop Device</label>
                <label>Tablet Device</label>
                <label>Mobile Device</label>
                <label>Country</label>
                <label>Country Capital</label>
                <label>City</label>
                <label>District</label>
              </div>
              <div class="offset-md-3 col-md-3 ">
                <label>{{analytic?.browserVersion ? analytic.browserVersion : '-'}}</label>
                <label>{{analytic?.desktopDevice == true ? 'Yes' : 'No'}}</label>
                <label>{{analytic?.tabletDevice == true ? 'Yes' : 'No'}}</label>
                <label>{{analytic?.mobileDevice == true ? 'Yes' : 'No' }}</label>
                <label>{{analytic?.country? analytic.country : '-'}}</label>
                <label>{{analytic?.countryCapital ? analytic.countryCapital : '-' }}</label>
                <label>{{analytic?.city ? analytic.city : '-' }}</label>
                <label>{{analytic?.district ? analytic.district : '-'}}</label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-primary btn-sm" (click)="modal.close('close');">Close</button>
    </div>
  </div>
</ng-template>
