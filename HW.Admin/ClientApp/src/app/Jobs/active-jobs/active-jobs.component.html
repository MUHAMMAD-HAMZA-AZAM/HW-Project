  <div class="container-fluid">
    <div class="aj-heading-wrapper">
      <div class="job-header-title">
        <h5>Active Jobs</h5>
      </div>
      <div class="active-job-details job-header-boxes">
        <div class="active-job-box">
          <h6 class="text-success">Jobs Created: {{data.jobsCreated}}</h6>
        </div>
        <div class="active-job-box">
          <h6 class="text-danger">Jobs In-Progress: {{data.jobsInProgress}}</h6>
        </div>
        <div class="active-job-box">
          <h6 class="text-warning">Jobs Completed: {{data.jobsCompleted}}</h6>
        </div>
      </div>
    </div>
    <div class="contentWrapper">
      <div class="row">
        <div class="col-md-4">
          <h6 class="mainTitle" data-toggle="collapse" href="#collapse2" aria-expanded="true">Search Active Jobs</h6>
        </div>
      </div>
      <div id="collapse2" class="contentWrapper fs-12 collapse">
        <form class="">
          <div class="row ">
            <div class="col-md-4">
              <label for="customerName">Customer Name</label>
              <div class="input-group">
                <input type="text" autocomplete="off" maxlength="30" id="customerName" name="customerName" class="form-control" [(ngModel)]="customerName" placeholder="Customer Name" (keypress)="httpService.omit_special_char($event)" />
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <input type="radio" value="1" id="start" (click)="getRadioValue($event)" name="groupOfDefaultRadios" checked #restChecked>
                    <label class="" for="start">Start</label>
                    <input type="radio" class="" (click)="getRadioValue($event)" value="2" id="anyWhere" name="groupOfDefaultRadios">
                    <label class="" for="anyWhere">Anywhere</label>
                    <input type="radio" class="" value="3" id="end" (click)="getRadioValue($event)" name="groupOfDefaultRadios">
                    <label class="" for="end">End</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row  mt-3">
            <div class="col-md-2">
              <label for="tradesmanName">Job Quotation Id</label>
              <input type="text" autocomplete="off" id="jobId" maxlength="10" name="jobId" class="form-control" [(ngModel)]="jobId" placeholder="Job Quotation Id "  (keypress)="httpService.numberOnly($event)"/>
            </div>
            <div class="col-md-2">
              <label class="">Job Posted From Date</label>
              <input type="date" id="startDate" [(ngModel)]="startDate" name="startDate" class="form-control" />
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-2">
              <label class="">Job Posted To Date</label>
              <input type="date" id="endDate" [(ngModel)]="endDate" name="endDate" class="form-control" />
            </div>
            <div class="col-md-2">
              <label class="">City</label>
              <ng-multiselect-dropdown placeholder="City" style="display:inline;"
                                       [settings]="dropdownListForCity"
                                       [data]="cityList"
                                       [(ngModel)]="selectedCities"
                                       name="selectedCities"
                                       (onSelect)="onCitySelect($event)"
                                       (onSelectAll)="onCitySelectAll($event)"
                                       (onDeSelect)="onCityDeSelect($event)"
                                       (onDeSelectAll)="onCityDeSelectALL($event)"
                                       (OnDeSelect)="onCityDeSelect($event)">
              </ng-multiselect-dropdown>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-2 addressSearch">
              <div class="form-group  ">
                <label for="businessAddress">Location</label>
                <input type="text" class="form-control desc" maxlength="50" placeholder="Location" [(ngModel)]="location" id="location" name="location" autocomplete="off" autocapitalize="off" spellcheck="off" #search  (keypress)="httpService.omit_special_char($event)"/>
              </div>
              <div class="addressSearchResult" *ngIf="isAddress">
                <ul>
                </ul>
              </div>

            </div>
          </div>
          <div class="row">
            <div class="col-sm-4 inline-downlod-btns">
              <div class="form-group">
                <input class=" btn btn-primary btn-sm" type="submit" value="Search" (click)="GetActiveJobList()" />
              </div>
              <div class="form-group">
                <input class="btn btn-primary btn-sm" type="submit" (click)="resetForm()" value="Reset" />
              </div>
            </div>
          </div>
        </form>
      </div>

    </div>
    <div class="card shadow mb-4" *ngIf="dataNotFound">
      <div class="card-header justify-header">
        <h6 class="m-0 font-weight-bold">Active Jobs List</h6>
        <div class="g-pagination">
          <div class="data-count">
            <span>{{recoardNoFrom}}-{{recoardNoTo}} of {{totalRecoards}}</span>
            <div class="newOrOld-Data">
              <ul>
                <li><a (click)="LoadNewestRecoards()"> Newest</a></li>
                <li><a (click)="LoadOldestRecoards()">Oldest</a></li>
              </ul>
            </div>
            <!--<span>1-46 of 46</span>-->
          </div>
          <div class="indicators">
            <i class="fa fa-angle-left" (click)="PriviousClick()"></i>
            <i class="fa fa-angle-right" (click)="NextClick()"></i>
          </div>
        </div>
      </div>

      <div class="card-body">
        <div class="show_entries">
          <div class="no-of-entries">
            <label>No of Entries</label>
            <select class="" [(ngModel)]="data.pageSize" (change)="PageSizeChange()">
              <option value="50" selected>50</option>
              <option value="100">100</option>
            </select>
          </div>
          <div class="n0-of-pages">
            <label>No of Pages</label>
            <select class="" [(ngModel)]="pageNumber" (change)="clickchange()">
              <option *ngFor="let item of pageing1" value="{{item}}">{{item}} </option>
            </select>
          </div>
        </div>
        <div class="table-responsive">
          <table class="table table-bordered table-striped table-hover" id="dataTable" width="100%">
            <thead>
              <tr>
                <th width="1%" class="sorting" id="customerId" title="CustomerId">CID<span class="up " (click)="sorting('customerId','asc')">&nbsp;</span><span class="down " (click)="sorting('customerId','desc')">&nbsp;</span></th>
                <th width="20%" class="sorting" id="customer">Customer Name<span class="up" (click)="sorting('customer','asc')">&nbsp;</span><span class="down" (click)="sorting('customer','desc')">&nbsp;</span></th>
                <th width="1%" class="sorting" id="mobileNumber">Mobile <span class="up" (click)="sorting('mobileNumber','asc')">&nbsp;</span><span class="down" (click)="sorting('mobileNumber','desc')">&nbsp;</span></th>
                <th width="15%" class="sorting" id="town">Town / City<span class="up" (click)="sorting('town','asc')">&nbsp;</span><span class="down" (click)="sorting('town','desc')">&nbsp;</span></th>
                <th width="1%" class="sorting" id="jobId" title="Job Quotation Id">JQID<span class="up " (click)="sorting('customerId','asc')">&nbsp;</span><span class="down " (click)="sorting('customerId','desc')">&nbsp;</span></th>
                <th width="10%" class="sorting" id="job">Job Title<span class="up" (click)="sorting('customer','asc')">&nbsp;</span><span class="down" (click)="sorting('customer','desc')">&nbsp;</span></th>
                <th class="sorting dc-width-6" id="createdOn">Date<span class="up " (click)="sorting('createdOn','asc')">&nbsp;</span><span class="down" (click)="sorting('createdOn','desc')">&nbsp;</span></th>
                <th width="1%" class="sorting" id="recivedBids" title="Bid Received">BR<span class="up" (click)="sorting('recivedBids','asc')">&nbsp;</span><span class="down" (click)="sorting('recivedBids','desc')">&nbsp;</span></th>
                <th width="1%" title="Details" class="sorting">Det</th>
                <th width="1%" title="Delete" class="sorting" *ngIf="deleterights == 'true'">Del</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of cloneList">
                <!--<td>{{item.recordNo}}</td>-->
                <td>{{item.jobId}}</td>
                <!--<td>{{item.customerName}}</td>-->
                <td>{{(item.customerName.length > 30) ? (item.customerName | slice:0:30)+'...':(item.customerName)}}</td>
                <td>{{item.mobileNumber}}</td>
                <td>{{item.town}} {{item.city}}</td>
                <td>{{item.customerId}}</td>
                <!--<td>{{item.jobTitle}}</td>-->
                <td>{{(item?.jobTitle && item.jobTitle.length > 30) ? (item.jobTitle | slice:0:30)+'...':(item.jobTitle)}}</td>
                <td>{{item.createdOn | date: 'dd MMM yyyy'}}</td>
                <td>{{item.recivedBids}}</td>
                <!--<td *ngIf="item.recivedBids != 0"><a routerLink="/Jobmodule/app-recive-bids" (click)="GetJobQoutation(item.customerId)">{{item.recivedBids}}</a></td>-->
                <td>
                  <i class="fas fa-eye" data-target="#JobsDetailsmdl" data-toggle="modal" data-backdrop="static" data-keyboard="false" (click)="JobDetailsFunction(item.customerId,'activeJob')"></i>
                  <!-- Modal -->
                </td>
                <td *ngIf="deleterights == 'true'">
                  <a class="fas fa-trash" (click)="DeleteJobByJobQuotationId(item.customerId)"></a>
                  <!-- Modal -->
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="card-body" style="padding:0px !important">
          <div class="show_entries">
            <div class="no-of-entries">
              <label>No of Entries</label>
              <select class="" [(ngModel)]="data.pageSize" (change)="PageSizeChange()">
                <option value="50" selected>50</option>
                <option value="100">100</option>
              </select>
            </div>
            <div class="n0-of-pages">
              <label>No of Pages</label>
              <select class="" [(ngModel)]="pageNumber" (change)="clickchange()">
                <option *ngFor="let item of pageing1" value="{{item}}">{{item}} </option>
              </select>
            </div>
          </div>
        </div>
        <div class="card-header justify-header">
          <h6 class="m-0 font-weight-bold">Active Jobs List</h6>
          <div class="g-pagination">
            <div class="data-count">
              <span>{{recoardNoFrom}}-{{recoardNoTo}} of {{totalRecoards}}</span>
              <div class="newOrOld-Data">
                <ul>
                  <li><a (click)="LoadNewestRecoards()"> Newest</a></li>
                  <li><a (click)="LoadOldestRecoards()">Oldest</a></li>
                </ul>
              </div>
              <!--<span>1-46 of 46</span>-->
            </div>
            <div class="indicators">
              <i class="fa fa-angle-left" (click)="PriviousClick()"></i>
              <i class="fa fa-angle-right" (click)="NextClick()"></i>
            </div>
          </div>
        </div>


      </div>
    </div>
  </div>

  <div bsModal #postJobModalConfirm="bs-modal" id="confirmQuotes" class="modal fade">
    <div class="modal-dialog modal-confirm">
      <div class="modal-content">
        <div class="modal-header flex-column">
          <h4 class="modal-title w-100">Are you sure?</h4>
          <button type="button" class="close" (click)="hidemodal()" aria-hidden="true"></button>
        </div>
        <div class="modal-footer justify-content-end">
          <button type="button" class="btn btn-sm btn-primary" (click)="deletejobconfirm()">Delete </button>
          <button type="button" class="btn btn-sm btn-primary" (click)="hidemodal()" data-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <div class="job-details-model">
    <div bsModal #JobsDetailsModal="bs-modal" id="JobsDetailsmdl" class="modal fade">
      <div class="modal-dialog modal-confirm modal-lg" style="max-width:60%">
        <div class="modal-content">
          <div class="modal-header flex-column">
            <div class="modal-body" style="width:100%;">
              <section class="section-inner">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-lg-12 user-header" style="min-height:150px;">
                      <div class="user-image">
                        <ng-container *ngIf="jobDetails.profileImage !=null; else noThumbnail">
                          <img [src]="httpService.transform(jobDetails.profileImage)" alt="...">
                        </ng-container>
                        <ng-template #noThumbnail>
                          <img src="../../../assets/img/user-icon.png" alt="">
                        </ng-template>
                      </div>
                      <h4>{{jobDetails.firstName }} {{jobDetails.lastName}}</h4>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-3 col-md-4 sidebar-list pl-0">
                      <ul class="list-group">
                        <li class="list-group-item">
                          <i class="fas fa-phone-alt mr-2"></i> <span style="font-size:1.25rem;font-weight:500">{{jobDetails.customerMobileNo }}</span>
                          <p><i class="fas fa-envelope mr-2"></i>{{jobDetails.email }}</p>
                        </li>
                        <li class="list-group-item">
                          <h5>Signup Date</h5>
                          <p>{{jobDetails.singUpDate | date: "dd MMM yyy"}}</p>
                          <!--| date: "dd MMM yyy hh : mm : a"-->
                        </li>
                        <li class="list-group-item">
                          <h5>Address</h5>
                          <p><i class="fas fa-map-marker-alt mr-2"></i>{{jobDetails.customerAddress }}</p>
                        </li>
                      </ul>
                    </div>
                    <div class="col-lg-9 col-md-8 user-penal">
                      <ul class="nav nav-tabs">
                        <li><a [ngClass]="{'active': activitytab == '1'}" (click)="currenttab1()" data-toggle="tab" href="#activity">Activity Log</a></li>
                        <li><a data-toggle="tab" [ngClass]="{'active': activitytab == '2'}" (click)="currenttab2()" href="#jobInfo">Job Information</a></li>
                        <li><a data-toggle="tab" [ngClass]="{'active': activitytab == '3'}" (click)="currenttab3()" href="#receivedBid">Received Bids</a></li>
                        <li><a data-toggle="tab" [ngClass]="{'active': activitytab == '4'}" (click)="currenttab4()" href="#notifi">Notifications</a></li>
                      </ul>
                      <div class="tab-content">
                        <div id="activity" *ngIf="activitytab == '1'" class="tab-pane fade in active show">
                          <section class="section-inner">
                            <div class="container">
                              <div class="row">
                                <div class="col-lg-12 col-md-12 mx-auto mt-3">
                                  <div class="jobDetailsWrapper">
                                    <div class="activity-job-details">
                                      <h5>{{jobDetails.workTitle}}</h5>
                                      <span>Job Ref: {{CustomerId}}</span><span>Posted: {{peopleByCountry[0].createdDate | date:"dd MMM yyy"}}</span>

                                    </div>
                                  </div>
                                  <div class="activitylog-wrapper">
                                    <h4>Activity Log</h4>
                                    <div class="activityDetails">
                                      <div class="activityByDate" *ngFor="let group of peopleByCountry">
                                        <h5 class="mb-4">{{ group.createdDate | date:"hh:mm:a"}}</h5>
                                        <div class="row" *ngFor="let person of group.activitydetails">
                                          <div class="left-side-act pr-0 col-sm-1 col-3 col-md-3 col-lg-2">
                                            <small style="display:block;position: relative; margin-top:-5px;">{{ person.palceddate | date:"hh:mm:a"}}</small>
                                            <i class="act-fa-icon fas fa-user-circle" *ngIf="person.value ==1"></i>
                                            <i class="act-fa-icon" *ngIf="person.value ==2">
                                              <img width="30" height="30" src="../../../assets/img/tradesman-img.png" />
                                            </i>
                                          </div>
                                          <div class="right-side-act col-sm-11 col-9 col-md-9 col-lg-10">
                                            <p style="padding:13px 10px 10px 0px; margin-bottom:0 !important">{{person.text}}</p>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </section>
                        </div>
                        <div id="jobInfo" *ngIf="activitytab == '2'" class="tab-pane fade in active show">
                          <form class="row">
                            <div class="col-lg-12 form-group">
                              <label for="tital">Title</label>
                              <input type="text" class="form-control" value="{{jobDetails.workTitle}}" disabled id="tital" placeholder="Enter Title">
                            </div>
                            <div class="col-lg-6 form-group">
                              <label for="category">Category</label>
                              <input type="text" class="form-control" value="{{jobDetails.skillName}}" disabled id="category" placeholder="Enter Category">
                            </div>
                            <div class="col-lg-6 form-group">
                              <label for="sebcategory">Sub Category</label>
                              <input type="text" class="form-control" id="sebcategory" value="{{jobDetails.subSkillName}}" disabled placeholder="Enter Sub Category">
                            </div>
                            <div class="col-lg-12 form-group">
                              <label for="jobDescription">Job Description</label>
                              <textarea class="form-control" id="jobDescription" value="{{jobDetails.workDescription}}" disabled rows="3"></textarea>
                            </div>
                            <div class="col-lg-4 form-group">
                              <label for="exampleInputEmail1">Budget</label>
                              <input type="email" class="form-control" id="exampleInputEmail1" value="{{jobDetails.workBudget}}" disabled aria-describedby="emailHelp" placeholder="Enter email">
                            </div>
                            <div class="col-lg-4 form-group">
                              <label>Job Start Date</label>
                              <label class="form-control" style="background-color: #e9ecef;">{{jobDetails.workStartDate | date: "dd MMM yyy"}}</label>

                            </div>
                            <div class="col-lg-4 form-group">
                              <label>Job Start Time</label>
                              <label class="form-control" style="background-color: #e9ecef;">{{jobDetails.workStartDate | date: "hh : mm : ss: a"}}</label>
                            </div>

                            <div class="col-lg-12">
                              <label for="jobAddress">Job Address</label>
                              <textarea class="form-control" id="jobAddress" value="{{jobDetails.jobAddress}}" disabled rows="3"></textarea>
                            </div>
                          </form>
                        </div>
                        <div id="receivedBid" *ngIf="activitytab == '3'" class="tab-pane fade in active show">
                          <div class="table-responsive">
                            <table class="table">
                              <thead>
                                <tr>
                                  <th width="10%" title="Job Title">JT</th>
                                  <th width="3%" title="Job Budget">JB</th>
                                  <th width="5%" title="Tradesman Name">TN</th>
                                  <th width="3%" title="Tradesman Budget">TB</th>
                                  <th width="10%">Skill</th>
                                  <th width="3%" title="Bid Status">BS</th>
                                  <th width="13%" title="Bid Date & Time">BDT</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let bids of jobDetails.bidsList">
                                  <td>{{bids.workTitle.length > 25 ? (bids.workTitle | slice:0:30)+'...' : bids.workTitle  }}</td>
                                  <td>{{bids.workBudget}}</td>
                                  <td (click)="showModel(content,bids.tradesmanId)" style="text-decoration: underline;cursor:pointer;">{{bids.tradesmanName}}</td>
                                  <td>{{bids.amount}}</td>
                                  <td>{{bids.skill}}</td>
                                  <td *ngIf="bids.status == 'Accepted'" style="color:#05dd05; text-decoration: underline;">{{bids.status}}</td>
                                  <td *ngIf="bids.status == 'Declined'" style="color:red; text-decoration: underline;">{{bids.status}}</td>
                                  <td *ngIf="bids.status == 'Active'" style="color:#23bff1; text-decoration: underline;">{{bids.status}}</td>
                                  <td>{{bids.createdOn | date: "dd MMM yyy hh : mm : a"}}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                        <div id="notifi" *ngIf="activitytab == '4'" class="tab-pane fade in active show">
                          <div class="notifi-container" *ngFor="let noti of jobDetails.notificationDTO">
                            <ng-container *ngIf="noti.body != null ">
                              <div class="row notifi-row" style="padding:1%;">
                                <div class="col-lg-1 col-md-2 user-thumb"><img src="../../../assets/img/user.png" alt="..."></div>
                                <div class="col-lg-11 col-md-10 userNotiDtl">

                                  <p>{{noti.body}}</p>
                                  <p>at :{{noti.createdOn | date: "dd MMM yyy hh : mm : a"}}</p>
                                </div>
                              </div>
                            </ng-container>
                          </div>
                          <p>{{nodata}}</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
            </div>
            <div class="row" style="width:100%">
              <div class="col-md-12">
                <button type="button" class="mt-3 btn btn-primary btn-sm fa-pull-right" (click)="hidemodal()" data-dismiss="modal">Cancel</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <ng-template #content let-modal>
    <div class="modal-header">
      <h5 class="modal-title" id="modal-basic-title">Tradesman Details</h5>
    </div>
    <div class="modal-body">
      <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover" id="dataTable" width="100%" cellspacing="0">
          <thead>
            <tr>
              <th width="10%" title="Tradesman Name">TMN</th>
              <th width="4%">Mobile</th>
              <th width="4%">CNIC</th>
              <th width="5%">City</th>
              <th width="20%">Skills</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{businessProfile.firstName}} {{businessProfile.lastName}}</td>
              <td>{{businessProfile.mobile}}</td>
              <td>{{businessProfile.cnic}}</td>
              <td>{{businessProfile.city}}</td>
              <td>{{businessProfile.skills}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-primary btn-sm" (click)="modal.close('Save click')">Close</button>
    </div>
  </ng-template>



