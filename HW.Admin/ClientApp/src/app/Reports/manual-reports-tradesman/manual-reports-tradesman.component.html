<div class="container-fluid">
  <div class="row">
    <div class="col-md-4">
      <h6 class="mainTitle" data-toggle="collapse" href="#collapse1" aria-expanded="true">Tradesman Report</h6>
    </div>
  </div>
  <!--<button style="font-size: .775rem !important;margin-bottom:5px" *ngIf="reportFilter" (click)="funReportFilter()" class="btn btn-sm btn-primary">Show Filter</button>-->
  <div id="collapse1" class="contentWrapper fs-12 show">
    <form class="" #checkParent #f="ngForm" novalidate>
      <div class="row">
        <div class="col-md-4">
          <label for="customerName">Tradesman Name</label>
          <div class="input-group">
            <input type="text" autocomplete="off" maxlength="40" id="tradesmanName" name="tradesmanName" class="form-control" [(ngModel)]="tradesmanName" placeholder="Tradesman Name" />
            <div class="input-group-prepend">
              <div class="input-group-text">
                <input type="radio" value="1" id="start" (click)="getRadioValue($event)" name="tradesmanSearch" checked>
                <label class="" for="start">Start</label>
                <input type="radio" class="" (click)="getRadioValue($event)" value="2" id="anyWhere" name="tradesmanSearch">
                <label class="" for="anyWhere">Anywhere</label>
                <input type="radio" class="" value="3" id="end" (click)="getRadioValue($event)" name="tradesmanSearch">
                <label class="" for="end">End</label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-md-2">
          <label class="">Mobile</label>
          <input type="text" autocomplete="off" maxlength="11" id="mobile" placeholder="Mobile" pattern="^[0-9]{4}[0-9]{7}$" [(ngModel)]="mobile" #mobilee="ngModel" (keypress)="numberOnly($event)"  name="mobile" class="form-control" />
          <div *ngIf="mobilee?.errors" class="text-danger">
            <div *ngIf="mobilee.invalid && (mobilee.dirty || mobilee.touched)" class="text-danger">
              <label class="fs-12" style="margin-top:10px" *ngIf="mobilee.errors?.pattern">* Enter valid 11 digit mobile number.</label>
            </div>
          </div>
        </div>
        <div class="col-md-2">
          <label class="">CNIC</label>
          <input type="text" id="cnic" autocomplete="off" maxlength="13" placeholder="CNIC" [(ngModel)]="cnic" pattern="^[0-9]{5}[0-9]{7}[0-9]$" #cnicc="ngModel" (keypress)="numberOnly($event)" name="cnic" class="form-control" />
          <div *ngIf="cnicc?.errors" class="text-danger">
            <div *ngIf="cnicc.invalid && (cnicc.dirty || cnicc.touched)" class="text-danger">
              <label class="fs-12" style="margin-top:10px" *ngIf="cnicc.errors?.pattern">* Enter valid 13 digit cnic number.</label>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-md-2">
          <label class="">Start Date</label>
          <input type="date" id="startDate" [(ngModel)]="startDate" name="startDate" class="form-control" />
          <div *ngIf="submittedApplicationForm" class="invalid-feedback">
            <div><p>{{startDateErrorMessage}}</p></div>
          </div>
        </div>
        <div class="col-md-2">
          <label class="">End Date</label>
          <input type="date" id="endDate" [(ngModel)]="endDate" name="endDate" class="form-control" />
          <div *ngIf="submittedApplicationForm" class="invalid-feedback">
            <div><p>{{endDateErrorMessage}}</p></div>
          </div>
        </div>

      </div>
      <div class="row mt-2">
        <div class="col-md-2">
          <label class="">Tradesman Type</label>
          <ng-multiselect-dropdown placeholder="Tradesman Type" style="display:inline; vertical-align:top"
                                   [settings]="skillsdropdownSettings"
                                   [data]="skillList"
                                   [(ngModel)]="selectedSkills"
                                   name="selectedSkills"
                                   (onSelect)="onItemSelect($event)"
                                   (onSelectAll)="onItemSelectAll($event)"
                                   (onDeSelect)="OnItemDeSelect($event)"
                                   (onDeSelectAll)="OnItemDeSelectALL($event)"
                                   (OnDeSelect)="OnItemDeSelect($event)">
          </ng-multiselect-dropdown>
        </div>
        <div class="col-md-2">
          <label class="">City</label>
          <ng-multiselect-dropdown placeholder="City" style="display:inline;"
                                   [settings]="dropdownListForCity"
                                   [data]="cityList"
                                   [(ngModel)]="selectedCities"
                                   name="selectedCities"
                                   (onSelect)="onCitySelect($event)"
                                   (onSelectAll)="onCitySelectAll($event)"
                                   (onDeSelect)="onCityDeSelect($event)"
                                   (onDeSelectAll)="onCityDeSelectALL($event)"
                                   (OnDeSelect)="onCityDeSelect($event)">
          </ng-multiselect-dropdown>
        </div>

      </div>
      <div class="row mt-2">
        <div class="col-md-4 addressSearch">
          <div class="form-group  ">
            <label for="businessAddress">Location</label>
            <input type="text" placeholder="Location" maxlength="50" class="form-control desc" [(ngModel)]="location" autocomplete="off" id="location" name="location" (keyup)="serachAddress(location)" autocapitalize="off" spellcheck="off" #search />
          </div>
          <div class="addressSearchResult" (clickOutside)="onClickedOutside($event)" *ngIf="isAddress">
            <ul>
              <li *ngFor="let address of searchedAddress">
                <a (click)="setAddressValue($event)">{{address.customerAddress}}</a>
              </li>
              <li *ngIf="!locationSearchKeyMatch" class="text-danger text-center">No location Found</li>
            </ul>
          </div>

        </div>
      </div>
      <div class="row mt-1">
        <div class="col-md-4">
          <div class="form-group">
            <label>User Type</label>
            <div class="input-group-prepend">
              <div class="input-group-text user-type">
                <input type="radio" value="3" id="all" (click)="getRadioValueut($event)" name="groupOfDefaultRadios1" checked #resetAndChecked>
                <label class="" for="all">All User</label>
                <input type="radio" value="1" id="real" (click)="getRadioValueut($event)" name="groupOfDefaultRadios1">
                <label class="" for="real">Real User</label>
                <input type="radio" class="" (click)="getRadioValueut($event)" value="2" id="test" name="groupOfDefaultRadios1">
                <label class="" for="test">Test User</label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-1">
        <div class="col-md-4">
          <div class="form-group">
            <label>Email Verification Type</label>
            <div class="input-group-prepend">
              <div class="input-group-text user-type">
                <input type="radio" value="1" id="all1" (click)="getRadioValueemail($event)" name="groupOfDefaultRadios2" checked #restChecked>
                <label class="" for="all1">All User</label>
                <input type="radio" value="2" id="real1" (click)="getRadioValueemail($event)" name="groupOfDefaultRadios2">
                <label class="" for="real1">Email Veriiyed</label>
                <input type="radio" class="" (click)="getRadioValueemail($event)" value="3" id="test1" name="groupOfDefaultRadios2">
                <label class="" for="test1">Email Unverified</label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-1">
        <div class="col-md-4">
          <div class="form-group">
            <label>Mobile Verification Type</label>
            <div class="input-group-prepend">
              <div class="input-group-text user-type">
                <input type="radio" value="1" id="all2" (click)="getRadioValuemobile($event)" name="groupOfDefaultRadios3" checked #restChecked>
                <label class="" for="all2">All User</label>
                <input type="radio" value="2" id="real2" (click)="getRadioValuemobile($event)" name="groupOfDefaultRadios3">
                <label class="" for="real2">Mobile Verifyed</label>
                <input type="radio" class="" (click)="getRadioValuemobile($event)" value="3" id="test2" name="groupOfDefaultRadios3">
                <label class="" for="test2">Mobile Unverifyed</label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-1">
        <div class="col-md-4">
          <div class="form-group">
            <label>Tradesman Activity</label>
            <div class="input-group-prepend">
              <div class="input-group-text user-type">
                <input type="radio" value="1" id="allMobileUsers11" (click)="getRadioValueActivity($event)" name="groupOfDefaultRadios4" checked>
                <label class="" for="allMobileUsers11">All</label>
                <input type="radio" value="2" id="allMobileUsers1" (click)="getRadioValueActivity($event)" name="groupOfDefaultRadios4">
                <label class="" for="allMobileUsers1">Jobs Done</label>
                <input type="radio" value="3" id="verifiedMobileUser1" (click)="getRadioValueActivity($event)" name="groupOfDefaultRadios4">
                <label class="" for="verifiedMobileUser1">Bids Place No Job Done</label>
                <input type="radio" class="" (click)="getRadioValueActivity($event)" value="4" id="unVerifiedMobileUser2" name="groupOfDefaultRadios4">
                <label class="" for="unVerifiedMobileUser2">No Activity</label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 inline-downlod-btns">
          <div class="form-group">
            <input class="btn btn-primary btn-sm" type="submit" value="Search" (click)="TradesmanCustomeReportS()" [disabled]="!f.valid" />
          </div>
            <div class="form-group">
              <input class="btn btn-primary btn-sm" type="submit" (click)="resetForm()" value="Reset" />
            </div>
            <ng-container *ngIf="userRole.allowExport">
              <div class="form-group">
                <input *ngIf="tradesmanList.length>0" class="btn btn-primary btn-sm" type="button" value="Download pdf" (click)="DownloadPdf()" />
              </div>
              <div class="form-group">
                <input *ngIf="tradesmanList.length>0" class=" btn btn-primary btn-sm" type="button" value="Download xlxs" (click)="DownloadXlsx()" />
              </div>
              <div class="form-group">
                <input *ngIf="tradesmanList.length>0" class="btn btn-primary btn-sm" type="submit" value="Download Csv" (click)="exportCSV()" />
              </div>
            </ng-container>
        </div>
      </div>
    </form>
  </div>

  <!--<label class="container text-secondary" id="summary"></label>-->
  <div id="canvas">
    <div class="">

      <div class="card shadow mb-4" [hidden]="!showTable">
        <div class="card-header justify-header">
          <h6 class="m-0 font-weight-bold">Tradesman List</h6>
          <label *ngIf="showTable" class="fs-12 m-0 fa-pull-right text-right">Total. {{completeList}}</label>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered table-striped table-hover" id="dataTable" width="100%" cellspacing="0" #dataTable>
              <thead>
                <tr>
                  <th title="Tradesman Id" width="1%">TMID</th>
                  <th width="8%">Tradesman Name</th>
                  <!--<th width="3%">Tradesman Name</th>-->
                  <th width="20%">Skills</th>
                  <!--<th width="15%">Skills</th>-->
                  <!--<th width="12%">Address</th>-->
                  <th width="15%">Address</th>
                  <!--<th width="1%">Mobile</th>-->
                  <th width="2%">Mobile</th>
                  <th class="dc-width-6">Date</th>
                  <th width="1%">CNIC</th>
                  <th width="3%">City</th>
                  <th width="1%" title="User Type">UT</th>
                  <th width="1%" title="Tradesman Activty">TA</th>
                  <th width="2%" title="Email Verified">EV</th>
                  <th width="2%" title="Mobile Verified">MV</th>
                  <!--<th width="10%">Town</th>-->

                </tr>
              </thead>
              <tbody class="table-content-fs">
                <tr *ngFor="let tradesman of tradesmanList">
                  <td>{{tradesman.tradesmanId}}</td>
                  <td>{{tradesman.firstName}} {{tradesman.lastName}}</td>
                  <td>{{tradesman.skillName}}</td>
                  <td>{{tradesman.addressLine}}</td>
                  <td>{{tradesman.mobileNumber}}</td>
                  <td>{{tradesman.createdOn | date: "dd MMM yyy"}}</td>
                  <td>{{tradesman.cnic}}</td>
                  <td>{{tradesman.city}}</td>
                  <td>{{tradesman.isTestUser ? 'Test' : 'Real'}}</td>
                  <td>{{tradesman.tradesmanActivity}}</td>
                  <td *ngIf="tradesman.emailConfirmed== true ">Yes</td>
                  <td *ngIf="tradesman.emailConfirmed!= true ">No</td>
                  <td *ngIf="tradesman.phoneNumberConfirmed== true ">Yes</td>
                  <td *ngIf="tradesman.phoneNumberConfirmed!= true ">No</td>
                  <!--<td>{{tradesman.area}}</td>-->
                  <!-- <td>{{tradesman.modifiedOn | date: "dd MMM yyy"}}</td>-->
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>

  </div>
  <div class="row">
    <div class="col-md-4">
      <p *ngIf="showNullMessage" class="text-danger">No result found.</p>
    </div>
  </div>
</div>
