<div class="container-fluid">
  <div class="row">
    <div class="col-md-4">
      <h6 class="mainTitle" data-toggle="collapse" href="#collapse1"  aria-expanded="true">Posted Ads Report</h6>
    </div>
  </div>

  <div id="collapse1" class="contentWrapper fs-12 show">
    <form>
      <!--<div class="container">-->
      <div class="row">
        <div class="col-md-4">
          <label for="customerName">Supplier Name</label>
          <div class="input-group">
            <input type="text" autocomplete="off" id="supplierName" maxlength="40" name="supplierName" class="form-control" [(ngModel)]="supplierName" placeholder="Supplier Name" />
            <div class="input-group-prepend">
              <div class="input-group-text">
                <input type="radio" value="1" id="start" (click)="getRadioValue($event)" name="groupOfDefaultRadios" checked #restChecked>
                <label class="" for="start">Start</label>
                <input type="radio" class="" (click)="getRadioValue($event)" value="2" id="anyWhere" name="groupOfDefaultRadios">
                <label class="" for="anyWhere">Anywhere</label>
                <input type="radio" class="" value="3" id="end" (click)="getRadioValue($event)" name="groupOfDefaultRadios">
                <label class="" for="end">End</label>
              </div>
            </div>
          </div>
        </div>
        <!--<div class="col-md-2">
          <label for="SupplierName">Supplier Name</label>
          <input type="text" autocomplete="off" id="supplierName" name="supplierName" class="form-control" [(ngModel)]="supplierName" placeholder="Supplier Name" />
        </div>
        <div class="col-md-2">
          <div class="inlineRadioBtns">
            <div class="custom-control custom-radio">
              <input type="radio" class="custom-control-input" value="1" id="start" name="groupOfDefaultRadios" (click)="getRadioValue($event)" checked>
              <label class="custom-control-label" for="start">Start</label>
            </div>

            <div class="custom-control custom-radio">
              <input type="radio" class="custom-control-input" value="2" id="anyWhere" name="groupOfDefaultRadios" (click)="getRadioValue($event)">
              <label class="custom-control-label" for="anyWhere">Any Where</label>
            </div>
            <div class="custom-control custom-radio">
              <input type="radio" class="custom-control-input" value="3" id="end" name="groupOfDefaultRadios" (click)="getRadioValue($event)">
              <label class="custom-control-label" for="end">End</label>
            </div>
          </div>
        </div>-->
      </div>
      <div class="row mt-3">
        <div class="col-md-2">
          <label class="">From Date</label>
          <input type="date" id="startDate" [(ngModel)]="startDate" name="startDate" class="form-control" />
          <div *ngIf="submittedApplicationForm" class="invalid-feedback">
            <div><p>{{startDateErrorMessage}}</p></div>
          </div>
        </div>
        <div class="col-md-2">
          <label class="">To Date</label>
          <input type="date" id="endDate" [(ngModel)]="endDate" name="endDate" class="form-control" />
          <div *ngIf="submittedApplicationForm" class="invalid-feedback">
            <div><p>{{endDateErrorMessage}}</p></div>
          </div>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-md-2">
          <label for="tradesmanName">Ad Id</label>
          <input type="text" autocomplete="off" maxlength="10" id="adId" name="adId" class="form-control" [(ngModel)]="adId" placeholder="Ad Id " />
        </div>
        <div class="col-md-2">
          <label class="">City</label>
          <ng-multiselect-dropdown placeholder="City" style="display:inline;"
                                   [settings]="dropdownListForCity"
                                   [data]="cityList"
                                   [(ngModel)]="selectedCities"
                                   name="selectedCities"
                                   (onSelect)="onCitySelect($event)"
                                   (onSelectAll)="onCitySelectAll($event)"
                                   (onDeSelect)="onCityDeSelect($event)"
                                   (onDeSelectAll)="onCityDeSelectALL($event)"
                                   (OnDeSelect)="onCityDeSelect($event)">
          </ng-multiselect-dropdown>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-md-2 addressSearch">
          <div class="form-group  ">
            <label for="businessAddress">Location</label>
            <input type="text" class="form-control desc" maxlength="50" placeholder="Location" autocomplete="off" [(ngModel)]="location" id="location" name="location" (keyup)="serachAddress(location)" autocapitalize="off" spellcheck="off" #search />
          </div>
          <div class="addressSearchResult" *ngIf="isAddress">
            <ul>
              <li *ngFor="let address of searchedAddress">
                <a (click)="setAddressValue($event)">{{address.customerAddress}}</a>
              </li>
              <li *ngIf="!locationSearchKeyMatch" class="text-danger text-center">No location Found</li>

            </ul>
          </div>

        </div>
      </div>
      <div class="row">
        <div class="col-sm-4 inline-downlod-btns">
          <div class="form-group">
            <input class=" btn btn-primary btn-sm" type="submit" value="Search" (click)="loadJobs()" />
          </div>
          <div class="form-group">
            <input class="btn btn-primary btn-sm" type="submit" (click)="resetForm()" value="Reset" />
          </div>
          <ng-container *ngIf="userRole.allowExport">
            <div class="form-group">
              <input *ngIf="jobcount>0" class="btn btn-primary btn-sm" type="button" value="Download pdf" (click)="DownloadPdf()" />
            </div>
            <div class="form-group">
              <input *ngIf="jobcount>0" class="btn btn-primary btn-sm" type="button" value="Download Excel" (click)="DownloadXlsx()" />
            </div>
            <div class="form-group">
              <input *ngIf="jobcount>0" class="btn btn-primary btn-sm" type="submit" value="Download Csv" (click)="exportCSV()" />
            </div>
          </ng-container>
        </div>
      </div>


    </form>
  </div>

  <div class="card shadow mb-4" [hidden]="!showTable">
    <div class="card-header justify-header">
      <h6 class="m-0 font-weight-bold">Posted Ads List</h6>

      <!--<button (click)="showModalAdd1(content)" class="btn-sm btn btn-secondary btn-sm"><i class="fa fa-plus"></i>Post Ad</button>-->

      <label class="fs-12 m-0 text-right" *ngIf="jobcount>0">Total: {{jobcount}} </label>
    </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-bordered table-striped table-hover" id="dataTable" width="100%" cellspacing="0" #dataTable>
            <thead>
              <tr>
                <th width="1%">Ad Id</th>
                <th width="7%">Supplier Name</th>
                <th width="8%">Product Name</th>
                <th width="8%">Sub Product Name</th>
                <th width="7%">Ad Title</th>
                <!--<th width="7%">Add Status</th>-->
                <th width="21%">Address</th>
                <th width="1%">Price</th>
                <th width="2%">City</th>
                <!--<th width="10%">Town</th>-->
                <th class="dc-width-6">Date</th>
              </tr>
            </thead>
            <tbody class="table-content-fs">
              <tr *ngFor="let ads of adsList">
                <td>{{ads.supplierAdsId}}</td>
                <td>{{ads.supplierName}}</td>
                <td>{{ads.productName}}</td>
                <td>{{ads.subCategoryName}}</td>
                <td>{{ads.adTitle}}</td>

                <!--<td>{{ads.addStatus}}</td>-->
                <td>{{ads.address}}</td>
                <td>{{ads.price}}</td>
                <td>{{ads.cityName}}</td>

                <!--<td>{{ads.town}}</td>-->
                <td>{{ads.createdOn | date: "dd MMM yyy"}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>
  <div class="row">
    <div class="col-md-4">
      <p *ngIf="showNullMessage" class="text-danger">No result found.</p>
    </div>
  </div>
</div>

<ng-template #content let-modal style="width:700px;">
  <div class="modal-header">
    <h5 class="modal-title" id="modal-basic-title">Ad Post</h5>
  </div>
  <form [formGroup]="promoForm">
    <div class="modal-body">
      
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="jobTitle">Category</label>
          <select type="text" class="form-control" (change)="SelectCategroy($event.target.value)" formControlName="productCategoryId" [ngClass]="{ 'is-invalid': submitted &&  f.productCategoryId.errors }" [value]="0">
            <option [attr.selected]="categoryId==0 ? true : null" [attr.disabled]="categoryId==0 ? true : null">Selcet category</option>
            <option *ngFor="let item of productCategoryList; let i= index" [attr.value]="item.id" [attr.selected]="item.id ==categoryId ? true : null">{{item.value}}</option>
          </select>
          <div *ngIf="submitted && f.productCategoryId.errors" class="invalid-feedback">
            <div *ngIf="f.productCategoryId.errors.required">{{errorsList.categoryIdError}}</div>
          </div>
        </div>
        <div *ngIf="productSubCategoryList.length > 0 || postAdVm.productSubcategoryId != null" class="form-group col-md-6">
          <label for="message">Sub Category</label>
          <select type="text" id="jobTitle" class="form-control" (change)="SelectSubCategory($event.target.value)" formControlName="productSubCategoryId" [ngClass]="{ 'is-invalid': submitted &&  f.productSubCategoryId.errors }" [value]="0">
            <option value="" selected hidden>Select Subcategory</option>
            <option *ngFor="let item of productSubCategoryList" value="{{item.id}}">{{item.value}}</option>
          </select>
          <div *ngIf="submitted && f.productSubCategoryId.errors" class="invalid-feedback">
            <div *ngIf="f.productSubCategoryId.errors.required">{{errorsList.subCategoryIdError}}</div>
          </div>
        </div>
        <div class="form-group col-md-6">
          <label for="postTitle">Give a Title to Your Post</label>
          <input type="text" maxlength="30" id="postTitle" class="form-control" formControlName="postTitle" [ngClass]="{ 'is-invalid': submitted &&  f.postTitle.errors }" required>
          <div *ngIf="submitted && f.postTitle.errors" class="invalid-feedback">
            <div *ngIf="f.postTitle.errors.required">{{errorsList.adTitleError}}</div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label class="fs-12">User Name</label>
            <select class="form-control" formControlName="supplierId">
              <option [ngValue]="0" disabled>Select UserName</option>
              <option *ngFor="let promo1 of userdatafiltred" [value]="promo1.userTypeId">{{promo1.firstName}}</option>
            </select>
          </div>
        </div>
        <div class="form-group col-md-12">
          <label for="product">About Product</label>
          <textarea type="text" id="product" maxlength="50" class="form-control desc" formControlName="postDiscription" [ngClass]="{ 'is-invalid': submitted &&  f.postDiscription.errors }" required></textarea>
          <div *ngIf="submitted && f.postDiscription.errors" class="invalid-feedback">
            <div *ngIf="f.postDiscription.errors.required">{{errorsList.descriptionError}}</div>
          </div>
        </div>
        <div class="form-group col-md-12" style="margin:20px">
          <label>Add Images <small>(max 4)</small></label>
          <div class="form-control upload-img">
            <div class="file btn btn-lg btn-light">
              <i class="far fa-image"></i>
              <input type="file" name="file" id="name" accept="image/*" multiple (change)="OnSelectFile($event)">
            </div>
            <div class="imgRow">
              <div *ngFor="let i of listOfImages;let index = index;" id="addImgFile">
                <i class="fas fa-times" (click)="CancelImage(index+1)">
                </i>
                <img class=".modallist" width="100" id="PostImage" height="100" (click)="ImagePopUp(i.imageBase64)" [src]="i.imageBase64" alt="" data-toggle="modal" data-target="#postad-img-modal">
              </div>
            </div>
          </div>

        </div>

        <div class="form-group col-md-6 d-none" style="margin-top:30px;">
          <label>Add Video <small>(only 1)</small></label>
          <div class="form-control upload-img">
            <div class="file btn btn-lg btn-light">
              <i class="fas fa-video"></i>
              <input type="file" name="file" id="name">
            </div>
          </div>
        </div>
        <div class="form-group col-md-4">
          <label for="price">Price <small>(Rs.)</small></label>
          <input inputmode="numeric" id="price" maxlength="10" pattern="^[0-9]*$" class="form-control" formControlName="price" [ngClass]="{ 'is-invalid': submitted &&  f.price.errors }" required>
          <div *ngIf="submitted && f.price.errors" class="invalid-feedback">
            <div *ngIf="f.price.errors.required">{{errorsList.priceError}}</div>
          </div>
        </div>
        <div class="form-group col-md-4">
          <label for="city">City</label>
          <select id="city" class="form-control" (change)="SelectCity($event.target.value)" formControlName="cityId" [ngClass]="{ 'is-invalid': submitted &&  f.cityId.errors }" [value]="0">
            <option value="" selected hidden>Select City</option>
            <option *ngFor="let item of cityList" value="{{item.id}}">{{item.value}}</option>
          </select>
          <div *ngIf="submitted && f.cityId.errors" class="invalid-feedback">
            <div *ngIf="f.cityId.errors.required">{{errorsList.cityError}}</div>
          </div>
        </div>
        <div class="form-group col-md-4">
          <label for="town">Town</label>
          <input type="text" maxlength="30" id="town" formControlName="town" class="form-control" [ngClass]="{ 'is-invalid': submitted &&  f.town.errors }" required>
          <div *ngIf="submitted && f.town.errors" class="invalid-feedback">
            <div *ngIf="f.town.errors.required">{{errorsList.townError}}</div>
          </div>
        </div>
        <div class="form-group col-md-12">
          <label for="address">Address</label>
          <textarea type="text" maxlength="250" id="address" formControlName="address" [ngClass]="{ 'is-invalid': submitted &&  f.address.errors }" class="form-control desc" required></textarea>
          <div *ngIf="submitted && f.address.errors" class="invalid-feedback">
            <div *ngIf="f.address.errors.required">{{errorsList.addressError}}</div>
          </div>
        </div>
        <div class="form-group col-md-12 shipmentMethods">
          <h4>Shipment Methods</h4>
          <div class="row">
            <div class="form-group col-lg-4 col-md-6">
              <div class="form-check">
                <div class="material-switch">
                  <input id="delivery" name="delivery" type="checkbox" checked formControlName="deliveryAvailable" />
                  <label for="delivery" class="label-success"></label>
                </div>
                <label class="form-check-label text-dark" for="gridCheck">
                  Delivery Available
                </label>
              </div>
            </div>
        
            <div class="form-group col-lg-4 col-md-6">
              <div class="form-check">
                <div class="material-switch">
                  <input id="collection" name="collection" type="checkbox" formControlName="collectionAvailable" [ngClass]="{ 'is-invalid': submitted &&  f.collectionAvailable.errors }" />
                  <label for="collection" class="label-success"></label>
                </div>
                <label class="form-check-label text-dark" for="gridCheck">
                  Collection Available
                </label>
                <div *ngIf="submitted && f.collectionAvailable.errors" class="invalid-feedback">
                  <div *ngIf="f.collectionAvailable.errors.required">{{errorsList.collectionError}}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--<div *ngIf="AdId == 0" class="col-lg-12 text-right mb-4">
    <button type="button" (click)="postAd()" class="btn btn-success next"> Next</button>
  </div>
  <div *ngIf="AdId > 0" class="form-group col-md-12 mt-2 text-center">
    <button type="button" (click)="openConfirmationModal()" class="btn btn-danger .modallist mr-2" data-toggle="modal" data-target="#requestCallback">Remove</button>
    <button type="button" (click)="postAd()" class="btn btn-success"> Update</button>

  </div>-->
      </div>
    
    </div>
    <div class="modal-footer">
      <div class="row">
        <div class="col-md-6 inline-downlod-btns">
          <button type="submit" class="btn btn-sm btn-primary mr-6" (click)="postAd()" style="margin:5px">Save</button>
          <button type="reset" class="btn btn-sm btn-primary" (click)="resetForm()" style="margin:5px">Reset</button>
          <button type="submit" class="btn btn-primary btn-sm" (click)="modal.close('Save click')" style="margin:5px">Cancel</button>
        </div>
      </div>
    </div>
  </form>
</ng-template>
